{"version":3,"sources":["text-logo.png","logo.svg","api-config.js","EventExpansionPanel.js","SubmitDialog.js","NewPayment.js","PaymentRow.js","PaymentsIndex.js","SideNavBar.js","CancelPaymentDialog.js","WithdrawDialog.js","PaymentDetails.js","MobileNavBar.js","Settings.js","DropDownNav.js","MobileSideDrawer.js","App.js","serviceWorker.js","HomeContent.js","FAQContent.js","Homepage.js","Routing.js","index.js"],"names":["module","exports","__webpack_require__","p","backendHost","theme","createMuiTheme","EventExpansionPanel","handleClearEvent","ts","_this","props","clearEvent","_this2","this","classes","react_default","a","createElement","Object","keys","events","map","key","index","event","name","loading","statusText","msgLines","className","root","ExpansionPanel","style","overflowX","ExpansionPanelSummary","expandIcon","ExpandMore_default","heading","Typography","LinearProgress","width","ExpansionPanelDetails","details","elem","Divider","ExpansionPanelActions","Button","size","color","onClick","renderEvent","React","Component","withStyles","margin","fontSize","typography","pxToRem","flexBasis","flexShrink","secondaryHeading","palette","text","secondary","icon","verticalAlign","height","alignItems","helper","borderLeft","concat","divider","padding","spacing","link","primary","main","textDecoration","&:hover","withTheme","hostname","window","location","console","log","process","REACT_APP_USE_LOCAL_RELAYER","REACT_APP_BACKEND_HOST","getEndpointForVersion","version","BigNumber","require","SubmitDialog","classCallCheck","possibleConstructorReturn","getPrototypeOf","call","state","copied","paymentId","prevCode","undefined","prevRecipient","handleSubmit","recipient","resolvedAddr","newPayment","codeHash","web3","utils","soliditySha3","code","createPayment","amount","parseInt","obj","wrap","seconds","minutes","hours","days","JSONToMillis","holdTime","sendEther","denom","token","toggleSubmit","history","push","ethAmountLabel","tokenAmountLabel","fromWei","toWei","toString","error","obscuredPassphrase","arr","split","i","length","repeat","join","handyInfo","passphrase","shortId","recipientAddr","etherclearContractInstance","badAddr","getPaymentId","then","result","substring","setState","catch","jsonStr","sendAmount","calculateSendAmount","_this$props$calculate","calculateFees","paymentFee","baseFee","displayedPaymentFee","num","tokenInfo","getTokenMap","div","pow","decimals","displayPaymentFee","displayedBaseFee","Dialog","open","onClose","aria-labelledby","aria-describedby","DialogTitle","id","DialogContent","overflow","DialogContentText","display","flexDirection","justifyContent","center","lib","JSON","stringify","onCopy","IconButton","Tooltip","title","FileCopy_default","DialogActions","autoFocus","withRouter","niceware","toBN","amt","DOMAIN_REGEX","NewPayment","componentDidMount","updateBalance","toWeiBN","toFixed","toTokenBN","times","handleClickShowPassword","showPassword","refreshCode","generatePassphrase","toggleSubmitDialog","bool","submitOpen","handleSelectChange","target","old","selectedToken","network","value","defineProperty","getCurrentSelectedToken","resolveENSNameToAddr","_ref","asyncToGenerator","regenerator_default","mark","_callee","val","addr","copy","_context","prev","next","resolvedNames","ensUtil","resolver","sent","t0","stop","_x","apply","arguments","isValidDomainName","test","getWhitelistedTokens","whitelistedTokensMainnet","whitelistedTokensRopsten","isBadTimeInput","input","handleSwitch","_ref2","_callee2","_context2","_x2","isBalanceEnough","balance","isValidAmount","rawAmount","minus","isNegative","updateIsBalanceEnough","balanceEnough","countDecimals","numStr","Math","floor","parseFloat","valueOf","includes","denomToPrecision","numDecimals","updateAmount","updateNewPayment","realBalance","asyncSetState","instance","newState","Promise","resolve","ropsten","displayBalance","balanceLoaded","prevProps","useEth","updateTokenBalance","_this$props","breakpoints","currentBreakpoint","isAddress","validAmount","badTimeInput","disableSubmit","handleFocus","select","formLabel","marginBottom","textAlign","desktop","fontWeight","TextField","textField","onChange","marginLeft","disabled","label","helperText","CheckCircle_default","autoComplete","FormControlLabel","control","Switch","checked","Grid","container","direction","marginRight","type","marginTop","FormControl","formControl","InputLabel","htmlFor","Select","Input","selectedDenoms","MenuItem","selected","FormHelperText","badTime","react","variant","updateNewPaymentTime","onFocus","onInput","e","max","slice","InputProps","endAdornment","InputAdornment","position","aria-label","VisibilityOff_default","Visibility_default","button","Refresh_default","justify","react_responsive_default","query","matches","buttonText","cancelButton","toggleNew","src_SubmitDialog","wei","Kwei","babbage","Mwei","lovelace","Gwei","shannon","microether","szabo","milliether","finney","ether","objectSpread","mixins","gutters","paddingTop","paddingBottom","minWidth","selectEmpty","withBreakpoints","PaymentStatus","paymentStatusText","payment","openDate","paymentOpenTime","Date","symbol","tokenAddrToSymbol","toLowerCase","TableRow","hover","TableCell","toLocaleString","year","month","day","minute","hour","matched","PaymentsIndex","latestTsFirst","b","refreshPayments","getPaymentEvents","onFilterChange","item","paymentType","bind","assertThisInitialized","allPayments","openPayments","closedPayments","loadingPayments","validDaysInput","isNaN","daysInput","headerWidth","screen","headerSize","dynamicFont","updateDaysInput","Checkbox","paddingLeft","Table","TableHead","TableBody","src_PaymentRow","useStyles","makeStyles","paper","background","badgeStyles","zIndex","badgeSpacing","appEvents","useTheme","eventCount","Drawer","anchor","react_router_dom","to","src","alt","List","navItem","ListItem","Badge","badgeContent","badge","pathname","CancelPaymentDialog","cancelPayment","toggleCancel","cancelPaymentFeeless","shortStr","str","len","_key","WithdrawDialog","passphraseInput","updatePassphraseInput","retrieveFunds","feeless","retrieveFundsFeeless","sender","toggleWithdraw","isPassphraseCorrect","passphraseCorrect","TextField_default","addrEquals","str1","str2","err","PaymentDetails","openCancel","openWithdraw","recipientName","senderName","fetchENSNames","txn","getCachedAddrForENSName","PaymentStatusToName","0","1","2","account","allAccounts","closeDate","paymentCloseTime","shortAddr","string","fromOrTo","status","currTs","now","formatTimeJSON","timeLeft","statusColor","lightGreen","red","flexLayout","dateOptions","date","IconButton_default","ArrowBack_default","alignContent","millisToJSON","href","getEtherscanTxnURL","openHash","OpenInNew_default","uniqueKey","closeHash","Fragment","src_WithdrawDialog","renderRecipientActions","buttonLabel","src_CancelPaymentDialog","renderSenderActions","ms","h","m","s","MobileNavBar","handleChange","tabClick","url","Paper","square","Tabs","backgroundColor","indicatorColor","textColor","Tab","Settings","getEtherclearArtifactURL","address","versionLabel","handleVersionChange","selectedVersion","errorMessage","updateContractVersion","fetch","res","res2","abrupt","json","registerContractInstance","defaultVersion","fetchedVersions","contractVersions","disableUpdate","Select_default","renderValue","fullWidth","Input_default","MenuItem_default","FormHelperText_default","Button_default","appBar","toolbarTitle","flex","StyledMenu","border","Menu","assign","elevation","getContentAnchorEl","anchorOrigin","vertical","horizontal","transformOrigin","StyledMenuItem","&:focus","& .MuiListItemIcon-root, & .MuiListItemText-primary","common","white","_React$useState","useState","_React$useState2","slicedToArray","anchorEl","setAnchorEl","handleClose","linkStyles","aria-owns","aria-haspopup","currentTarget","List_default","Boolean","ListItemText","MobileSideDrawer","side","contractDisplayName","displayName","noAddr","top","left","bottom","right","toggleDrawer","Fab","role","onKeyDown","getEtherscanAddressURL","getEtherclearContractAddress","mobile","mobileLandscape","tablet","tabletLandscape","desktopLarge","desktopWide","contract","GAS","GAS_ESTIMATE_MULTIPLIER","GAS_PRICE_GWEI","defaultDisplayDays","sleep","milliseconds","setTimeout","ENS","Web3","providers","HttpProvider","light","dark","contrastText","useNextVariants","App","openNew","duration","getEtherscanURL","endpoint","param","getENS","getInfuraProvider","hash","displayHashWithLinkMsg","msg","onNewPaymentClick","getEnsUtil","provider","getInfuraWeb3","cachedAddr","addrToName","resolveAddrToENSName","reverse","t1","t2","t3","setMainAddrENSName","_ref3","_callee3","_context3","mainAddrENSName","_x3","setContractAddrENSName","_ref4","_callee4","_context4","contractAddrENSName","_x4","checkRetrieveSignature","sig","signature","sigR","sigS","sigV","txID","from","accounts","gas","toggleMenuOpen","menuName","menuOpen","updateEvents","eventsCopy","updateEvent","line","updateEventForSuccess","updateEventForError","baseFeeWei","baseFeeEth","paymentFeeWei","paymentFeePercent","_ref5","_callee5","_this$calculateFees","sendValue","gasEstimate","_context5","createTokenPayment","plus","estimateGas","gasPrice","on","_x5","_x6","_x7","_x8","_x9","_x10","mainnetTokenData","ropstenTokenMap","tokenMap","k","_ref6","_callee6","erc20","_context6","eth","getBalance","IERC20ContractDefinition","ethereum","setProvider","currentProvider","at","balanceOf","_x11","_ref7","_callee8","_this$calculateFees2","amountWithFee","_context8","approve","_ref8","_callee7","_context7","_x17","approval","_x12","_x13","_x14","_x15","_x16","_ref9","_callee9","txnId","_context9","retrieveFundsAsRecipient","_x18","_x19","_ref10","_callee10","_context10","completePayment","_x20","_x21","_x22","_ref11","_callee11","_context11","_x23","_ref12","_callee13","requestType","sigUtil","ethUtil","eventName","chainId","msgParams","params","_context13","toChecksumAddress","networkNameToID","types","EIP712Domain","CompletePaymentRequest","primaryType","domain","verifyingContract","salt","message","dir","sendAsync","method","recovered","recoverTypedSignature","data","parse","msgLine","errMsg","relayerEndpoint","thisContractVersion","mode","headers","Content-Type","Access-Control-Allow-Origin","body","contractAddress","response","_ref13","_callee12","receipt","_context12","getTransactionReceipt","_x28","ex","_x24","_x25","_x26","_x27","_ref14","_callee14","_context14","cancelPaymentAsSender","_x29","precise","x","Number","toPrecision","getBlocksPerDay","_callee15","currBlock","fromBlock","diffSecs","numDays","_context15","getBlock","number","timestamp","_callee16","_context16","getRecentPaymentEvents","_ref17","_callee18","paymentMap","perDay","numBlocks","_context18","getCurrTimestamp","getPastEvents","filter","toBlock","_ref18","_callee17","entry","_copy","_payment","sortedPayments","_i","_context17","returnValues","openTime","transactionHash","closeTime","toNumber","sort","_x31","_x30","getPayments","_callee19","_context19","setupNetworkState","_callee20","_context20","getNetwork","loadWeb3","_callee21","providerAvailable","_context21","netId","networkIDToName","isMetaMask","getCurrentProvider","enable","mmState","fetchWeb3Accounts","metamaskInstalled","getAccounts","setWeb3AccountsIfMetamaskUnlocked","addAccounts","Type","Address","metamaskUnlocked","getContractAddress","definition","networkID","networks","etherclearContractDefinition","getRegistryContractAddress","registryContractDefinition","_ref22","_callee24","etherclearDefinition","Registry","Etherclear","etherclearAddr","registryAddr","_context24","_ref23","_callee22","allVersions","numVersions","contractVersion","_context22","registryContractInstance","getNumberOfVersions","getVersion","versionName","_x33","_ref24","_callee23","_context23","_x34","_x32","openTx","withdraw","cancel","closedTx","bodyWidth","innerWidth","noCredentialsMessage","gridHeight","react_breakpoints_lib_default","MuiThemeProvider_default","DropDownNav","src_SideNavBar","src_MobileNavBar","src_MobileSideDrawer","ROPSTEN","Add_default","react_router","path","exact","render","src_EventExpansionPanel","src_NewPayment","src_Settings","src_PaymentsIndex","_ref25","src_PaymentDetails","net","getNetworkType","infWeb3","currTimestamp","host","isTrust","isGoWallet","isAlphaWallet","isStatus","isToshi","__CIPHER__","isCipher","constructor","indexOf","BOKKY","3","match","HomeContent","layout","heroContent","component","align","gutterBottom","heroButtons","react_router_hash_link_lib","dist_es6","iconStyle","Create_default","Message_default","FAQContent","createPalette","footers","description","Homepage","handleMenuIconClick","handleMenuIconClose","buttonTheme","CssBaseline","AppBar","Toolbar","Menu_default","classNames","footer","ind","xs","noWrap","@global","up","maxWidth","borderTop","MainApp","src_App_0","Home","src_Homepage","Routing","ReactGA","initialize","pageview","initializeReactGA","ReactDOM","src_Routing","document","getElementById","navigator","serviceWorker","ready","registration","unregister"],"mappings":"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","file":"static/js/main.50482e17.chunk.js","sourcesContent":["module.exports = \"data:image/png;base64,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\"","module.exports = __webpack_public_path__ + \"static/media/logo.e3b143a5.svg\";","// Taken from https://daveceddia.com/multiple-environments-with-react/\nlet backendHost;\n//const apiVersion = \"v1\";\n\nconst hostname = window && window.location && window.location.hostname;\n\nconsole.log(\"Hostname is: \" + hostname);\nif (\n  hostname === \"etherclear.appspot.com\" ||\n  hostname === \"prod-dot-default-dot-etherclear.appspot.com\"\n) {\n  backendHost = \"https://prod-dot-relayer-dot-etherclear.appspot.com\";\n} else if (hostname === \"dev-dot-relayer-dot-etherclear.appspot.com\") {\n  backendHost = \"https://dev-dot-relayer-dot-etherclear.appspot.com\";\n} else if (\n  process.env.REACT_APP_USE_LOCAL_RELAYER === \"true\" &&\n  (hostname === \"localhost\" || hostname === \"127.0.0.1\")\n) {\n  // The local relayer service is for debugging only. Users may run the app locally\n  // with `npm run start`, in which case they should be using the prod environment\n  backendHost = \"http://localhost:8080\";\n} else {\n  /*\nelse if (/^qa/.test(hostname)) {\n  backendHost = `https://api.${hostname}`;\n}\n*/\n  // Fall back to prod relayer service, even if user is on localhost.\n  backendHost =\n    process.env.REACT_APP_BACKEND_HOST ||\n    \"https://prod-dot-relayer-dot-etherclear.appspot.com\";\n}\n\n//export const API_ROOT = `${backendHost}/api/${apiVersion}`;\nexport const API_ROOT = `${backendHost}/`;\n\n// TODO: clean this up, don't need API_ROOT anymore\n// We use the version to get the endpoint rather than\n// the hostname because the user may be running the app locally,\n// but still want to connect to the remote relayer service.\nexport const getEndpointForVersion = version => {\n  if (backendHost === \"http://localhost:8080\") {\n    return \"http://localhost:8080/\";\n  }\n  return \"https://\" + version + \"-dot-relayer-dot-etherclear.appspot.com/\";\n};\n","import React from \"react\";\nimport PropTypes from \"prop-types\";\nimport { withStyles, createMuiTheme } from \"@material-ui/core/styles\";\nimport ExpansionPanel from \"@material-ui/core/ExpansionPanel\";\nimport ExpansionPanelDetails from \"@material-ui/core/ExpansionPanelDetails\";\nimport ExpansionPanelSummary from \"@material-ui/core/ExpansionPanelSummary\";\nimport ExpansionPanelActions from \"@material-ui/core/ExpansionPanelActions\";\nimport Typography from \"@material-ui/core/Typography\";\nimport ExpandMoreIcon from \"@material-ui/icons/ExpandMore\";\n\nimport Button from \"@material-ui/core/Button\";\nimport Divider from \"@material-ui/core/Divider\";\nimport LinearProgress from \"@material-ui/core/LinearProgress\";\n\n// custom mui theme\nconst theme = createMuiTheme();\n\nconst styles = theme => ({\n  root: {\n    width: \"80%\",\n    margin: \"auto\"\n  },\n  heading: {\n    fontSize: theme.typography.pxToRem(15),\n    flexBasis: \"33.33%\",\n    flexShrink: 0\n  },\n  secondaryHeading: {\n    fontSize: theme.typography.pxToRem(15),\n    color: theme.palette.text.secondary\n  },\n  icon: {\n    verticalAlign: \"bottom\",\n    height: 20,\n    width: 20\n  },\n  details: {\n    alignItems: \"center\"\n  },\n  helper: {\n    borderLeft: `2px solid ${theme.palette.divider}`,\n    padding: `${theme.spacing(1)}px ${theme.spacing(2)}px`\n  },\n  link: {\n    color: theme.palette.primary.main,\n    overflowX: \"hidden\",\n    textDecoration: \"none\",\n    \"&:hover\": {\n      textDecoration: \"underline\"\n    }\n  }\n});\n\n//\nclass EventExpansionPanel extends React.Component {\n  handleClearEvent = ts => () => {\n    this.props.clearEvent(ts);\n  };\n\n  render() {\n    const { classes } = this.props;\n\n    const renderEvent = (index, event) => {\n      let { ts, name, loading, statusText, msgLines } = event;\n      return (\n        <div key={ts} className={classes.root}>\n          <ExpansionPanel style={{ overflowX: \"hidden\" }}>\n            <ExpansionPanelSummary expandIcon={<ExpandMoreIcon />}>\n              <div className={classes.heading}>\n                <Typography>{name}</Typography>\n              </div>\n              <div className={classes.heading}>\n                {loading ? <LinearProgress style={{ width: \"50%\" }} /> : \"\"}\n              </div>\n              <div className={classes.heading}>{statusText}</div>\n            </ExpansionPanelSummary>\n            <ExpansionPanelDetails className={classes.details}>\n              <div>\n                {msgLines.map((elem, index) => {\n                  return typeof elem === \"string\" ? (\n                    <div key={index} style={{ overflowX: \"hidden\" }}>\n                      <p style={{ overflowX: \"hidden\" }}>{elem}</p>\n                    </div>\n                  ) : (\n                    <div key={index}>{elem}</div>\n                  );\n                })}\n              </div>\n            </ExpansionPanelDetails>\n            <Divider />\n            <ExpansionPanelActions>\n              <Button\n                size=\"small\"\n                color=\"primary\"\n                onClick={this.handleClearEvent(ts)}\n              >\n                Clear\n              </Button>\n            </ExpansionPanelActions>\n          </ExpansionPanel>\n        </div>\n      );\n    };\n\n    return (\n      <div>\n        {Object.keys(this.props.events).map((key, index) =>\n          renderEvent(index, this.props.events[key])\n        )}\n      </div>\n    );\n  }\n}\n\nEventExpansionPanel.propTypes = {\n  classes: PropTypes.object.isRequired\n};\n\nexport default withStyles(styles, { withTheme: theme })(EventExpansionPanel);\n","import React from \"react\";\nimport Button from \"@material-ui/core/Button\";\nimport Dialog from \"@material-ui/core/Dialog\";\nimport DialogActions from \"@material-ui/core/DialogActions\";\nimport DialogContent from \"@material-ui/core/DialogContent\";\nimport { createMuiTheme } from \"@material-ui/core/styles\";\nimport { withTheme } from \"@material-ui/styles\";\nimport { withRouter } from \"react-router-dom\";\nimport DialogContentText from \"@material-ui/core/DialogContentText\";\nimport DialogTitle from \"@material-ui/core/DialogTitle\";\nimport Typography from \"@material-ui/core/Typography\";\nimport { CopyToClipboard } from \"react-copy-to-clipboard\";\nimport Tooltip from \"@material-ui/core/Tooltip\";\nimport IconButton from \"@material-ui/core/IconButton\";\nimport FileCopyIcon from \"@material-ui/icons/FileCopy\";\nimport Divider from \"@material-ui/core/Divider\";\nimport App from \"./App\";\n\nconst BigNumber = require(\"bignumber.js\");\n\nconst toBN = num => {\n  return new BigNumber(num);\n};\n\nconst theme = createMuiTheme();\n\nclass SubmitDialog extends React.Component {\n  state = {\n    copied: false,\n    paymentId: \"None\",\n    // These are stored so that we only fetch a new paymentId\n    // when one of them changes.\n    prevCode: undefined,\n    prevRecipient: undefined\n  };\n\n  constructor(props) {\n    super(props);\n  }\n\n  handleSubmit = () => {\n    let recipient =\n      this.props.resolvedAddr === undefined\n        ? this.props.newPayment.recipient\n        : this.props.resolvedAddr;\n    let codeHash = window.web3.utils.soliditySha3(this.props.code, recipient);\n    this.props.createPayment(\n      this.props.newPayment.amount,\n      recipient,\n      // TODO: not safe\n      parseInt(JSONToMillis(this.props.newPayment.holdTime) / 1000),\n      codeHash,\n      this.props.sendEther ? this.props.denom : this.props.token,\n      this.props.sendEther\n    );\n    this.props.toggleSubmit(false)();\n    // forces redirect to app events section\n    // TODO: update route when app events section route changes\n    this.props.history.push(\"/app\");\n  };\n\n  render() {\n    // TODO: just pass in the newPayment here.\n    let utils = window.web3.utils;\n    let tokenAmountLabel = this.props.token;\n\n    // TODO: defined twice\n    const formatTimeJSON = jsonStr => {\n      return (\n        \"Days: \" +\n        jsonStr[\"days\"] +\n        \", Hours: \" +\n        jsonStr[\"hours\"] +\n        \", Minutes: \" +\n        jsonStr[\"minutes\"]\n      );\n    };\n\n    // TODO: clean up, this is because of decimal values being entered in.\n    // An error will be displayed, but this dialog is still rendered.\n    let ethAmountLabel;\n    if (this.props.sendEther) {\n      try {\n        ethAmountLabel =\n          \" (\" +\n          (this.props.newPayment.amount === \"\"\n            ? \"N/A\"\n            : utils\n                .fromWei(\n                  utils.toWei(this.props.newPayment.amount, this.props.denom),\n                  \"ether\"\n                )\n                .toString()) +\n          \" ether)\";\n      } catch (error) {\n        ethAmountLabel = \"(N/A ether)\";\n      }\n    }\n\n    // Show only the last letter of each word.\n    // Assumes that the words are all at least one letter.\n    let obscuredPassphrase = (() => {\n      let arr = this.props.code.split(\" \");\n      //let last = arr[arr.length-1];\n      for (let i = 0; i < arr.length; i++) {\n        arr[i] = \"*\".repeat(arr[i].length - 1) + arr[i][arr[i].length - 1];\n      }\n      return arr.join(\" \");\n    })();\n\n    // We fetch the paymentId to present it to\n    // the sender in case they want to copy it with\n    // the passphrase.\n    let handyInfo = {\n      passphrase: this.props.code,\n      shortId: this.state.paymentId\n    };\n\n    let recipientAddr =\n      this.props.resolvedAddr === undefined\n        ? this.props.newPayment.recipient\n        : this.props.resolvedAddr;\n\n    // TODO: this is a hack since the bytes -> uint isn't reversible.\n    // May want to check for existence of ID as well here.\n    if (this.props.etherclearContractInstance === undefined) {\n      console.log(\"No Etherclear contract instance found\");\n    } else if (this.props.badAddr) {\n      console.log(\"Bad address, will not retrieve paymentId\");\n    } else {\n      let codeHash = window.web3.utils.soliditySha3(\n        this.props.code,\n        this.props.newPayment.recipient\n      );\n\n      // TODO: this causes a warning: \"Cannot update during an existing state transition\",\n      // since we do a setState() call in this block.\n      if (\n        this.state.prevCode !== this.props.code ||\n        this.state.prevRecipient !== this.props.recipient\n      ) {\n        this.props.etherclearContractInstance\n          .getPaymentId(recipientAddr, codeHash)\n          .then(result => {\n            //result = window.web3.utils.numberToHex(result);\n            console.log(\"Got paymentId for submit: \" + result);\n            if (\n              this.state.paymentId !==\n              result.toString().substring(0, 12) + \"...\"\n            ) {\n              this.setState({\n                paymentId: result.toString().substring(0, 12) + \"...\"\n              });\n            }\n          })\n          .catch(error => {\n            console.log(\"Error getting paymentId for submit: \" + error);\n          });\n\n        this.setState({\n          prevCode: this.props.code,\n          prevRecipient: this.props.recipient\n        });\n      }\n    }\n\n    // Returns decimal token amounts (amount divided by pow(10,num_token_decimal_places))\n    const displayPaymentFee = (sendEther, paymentFee, token) => {\n      if (sendEther) {\n        return window.web3.utils.fromWei(paymentFee.toString()) + \" ETH\";\n      } else {\n        let tokenInfo = this.props.getTokenMap()[token];\n\n        return (\n          paymentFee.div(toBN(10).pow(tokenInfo.decimals)).toString() +\n          \" \" +\n          token\n        );\n      }\n    };\n\n    let sendAmount = this.props.calculateSendAmount(\n      this.props.sendEther,\n      this.props.newPayment.amount,\n      this.props.denom,\n      this.props.token\n    );\n\n    let { paymentFee, baseFee } = this.props.calculateFees(sendAmount);\n\n    let displayedPaymentFee = displayPaymentFee(\n      this.props.sendEther,\n      paymentFee,\n      this.props.token\n    );\n\n    let displayedBaseFee =\n      baseFee === undefined\n        ? \"0\"\n        : window.web3.utils.fromWei(baseFee.toString(), \"ether\");\n\n    // Use of flex for displaying divs side by side:\n    // https://stackoverflow.com/questions/10006175/display-two-divs-side-by-side\n    return (\n      <div>\n        <Dialog\n          open={this.props.open}\n          onClose={this.props.toggleSubmit(false)}\n          aria-labelledby=\"submit-dialog-title\"\n          aria-describedby=\"submit-dialog-description\"\n        >\n          <DialogTitle id=\"submit-dialog-title\">{\"New Payment\"}</DialogTitle>\n          <Divider />\n          <br />\n          <DialogContent>\n            <strong>Recipient:</strong>{\" \"}\n            {\n              <div style={{ height: \"50px\", overflow: \"scroll\" }}>\n                {this.props.newPayment.recipient}\n              </div>\n            }\n            <DialogContentText id=\"submit-dialog-description\">\n              <strong>Hold Time:</strong>{\" \"}\n              {formatTimeJSON(this.props.newPayment.holdTime)}\n              <br />\n              <strong>Send amount:</strong> {this.props.newPayment.amount}{\" \"}\n              {this.props.sendEther ? this.props.denom : \"\"}\n              {this.props.sendEther ? ethAmountLabel : tokenAmountLabel}\n              <br />\n              <br />\n            </DialogContentText>\n            <div\n              style={{\n                display: \"flex\",\n                flexDirection: \"row\",\n                justifyContent: \"spaceAround\"\n              }}\n            >\n              <div style={{ display: \"flex\", flexDirection: \"column\" }}>\n                <strong>Passphrase:</strong> {obscuredPassphrase}\n                <br />\n                <strong>Short ID:</strong> {this.state.paymentId}\n                <br />\n              </div>\n              <div\n                style={{\n                  display: \"flex\",\n                  flexDirection: \"column\",\n                  center: \"vertical\"\n                }}\n              >\n                <CopyToClipboard\n                  text={JSON.stringify(handyInfo)}\n                  onCopy={() => this.setState({ copied: true })}\n                >\n                  <IconButton>\n                    <Tooltip title={\"Copy both to clipboard\"}>\n                      <FileCopyIcon />\n                    </Tooltip>\n                  </IconButton>\n                </CopyToClipboard>{\" \"}\n                {this.state.copied ? (\n                  <span style={{ color: \"red\" }}>Copied.</span>\n                ) : null}\n              </div>\n            </div>\n            <DialogContentText>\n              <br />\n              <strong>Base Fee:</strong> {displayedBaseFee + \" ETH\"}\n              <br />\n              <strong>Payment Fee:</strong> {displayedPaymentFee}\n              <br />\n              <br />\n              <strong>This passphrase is not saved.</strong> You must\n              communicate this code to the recipient over a secure channel for\n              them to be able to retrieve any funds.\n              <br />\n              <br />\n              <strong>The payment is not yet confirmed.</strong> Clicking\n              \"Confirm\" will open a notification or popup from the wallet\n              provider. Follow the instructions there to finish signing and\n              sending a payment.\n              <br />\n              <br />\n              <strong>\n                Token payments currently require two transactions.\n              </strong>{\" \"}\n              Wait for the first \"Approve\" call to succeed. When that happens, a\n              request for the next transaction that transfers funds should\n              appear, which must be completed to actually transfer tokens.\n            </DialogContentText>\n          </DialogContent>\n          <DialogActions>\n            <Button onClick={this.handleSubmit} color=\"primary\">\n              Confirm\n            </Button>\n            <Button\n              onClick={this.props.toggleSubmit(false)}\n              color=\"primary\"\n              autoFocus\n            >\n              Cancel\n            </Button>\n          </DialogActions>\n        </Dialog>\n      </div>\n    );\n  }\n}\n\n/**\n * @return {number}\n */\nfunction JSONToMillis(obj) {\n  let wrap = obj => {\n    return obj === undefined ? 0 : obj;\n  };\n  let ms =\n    1000 * parseInt(wrap(obj.seconds)) +\n    60 * 1000 * parseInt(wrap(obj.minutes)) +\n    60 * 60 * 1000 * parseInt(wrap(obj.hours)) +\n    24 * 60 * 60 * 1000 * parseInt(wrap(obj.days));\n  return ms;\n}\n\nexport default withTheme(withRouter(SubmitDialog));\n","import React, { Fragment } from \"react\";\nimport PropTypes from \"prop-types\";\nimport { withStyles, createMuiTheme } from \"@material-ui/core/styles\";\nimport Button from \"@material-ui/core/Button\";\nimport Divider from \"@material-ui/core/Divider\";\nimport TextField from \"@material-ui/core/TextField\";\nimport SubmitDialog from \"./SubmitDialog\";\nimport Grid from \"@material-ui/core/Grid\";\nimport Input from \"@material-ui/core/Input\";\nimport InputLabel from \"@material-ui/core/InputLabel\";\nimport MenuItem from \"@material-ui/core/MenuItem\";\nimport FormHelperText from \"@material-ui/core/FormHelperText\";\nimport MediaQuery from \"react-responsive\";\nimport FormControl from \"@material-ui/core/FormControl\";\nimport Select from \"@material-ui/core/Select\";\nimport FileCopyIcon from \"@material-ui/icons/FileCopy\";\nimport RefreshIcon from \"@material-ui/icons/Refresh\";\nimport IconButton from \"@material-ui/core/IconButton\";\nimport InputAdornment from \"@material-ui/core/InputAdornment\";\nimport Visibility from \"@material-ui/icons/Visibility\";\nimport VisibilityOff from \"@material-ui/icons/VisibilityOff\";\nimport { withBreakpoints } from \"react-breakpoints\";\n\nimport CheckCircleIcon from \"@material-ui/icons/CheckCircle\";\n\nimport { CopyToClipboard } from \"react-copy-to-clipboard\";\nimport Tooltip from \"@material-ui/core/Tooltip\";\nimport Switch from \"@material-ui/core/Switch\";\nimport FormControlLabel from \"@material-ui/core/FormControlLabel\";\nimport App from \"./App\";\nimport Web3 from \"web3\";\n\n// custom mui theme\nconst theme = createMuiTheme();\n\nconst BigNumber = require(\"bignumber.js\");\nconst niceware = require(\"niceware\");\n\nconst styles = theme => ({\n  root: {\n    ...theme.mixins.gutters(),\n    paddingTop: theme.spacing(2),\n    paddingBottom: theme.spacing(2)\n  },\n  textField: {\n    marginLeft: theme.spacing(1),\n    marginRight: theme.spacing(1)\n  },\n  button: {\n    margin: theme.spacing(1),\n    color: theme.palette.primary.main\n  },\n  cancelButton: {\n    margin: theme.spacing(1)\n  },\n  buttonText: {\n    color: \"white\"\n  },\n  input: {\n    display: \"none\"\n  },\n  formControl: {\n    margin: theme.spacing(1),\n    minWidth: 120\n  },\n  selectEmpty: {\n    marginTop: theme.spacing(1)\n  }\n});\n\nconst toBN = amt => {\n  return new BigNumber(amt);\n};\n\n// Stolen from https://www.oreilly.com/library/view/regular-expressions-cookbook/9781449327453/ch08s15.html\nconst DOMAIN_REGEX = /^([a-z0-9]+(-[a-z0-9]+)*\\.)+[a-z]{2,}$/;\n\nclass NewPayment extends React.Component {\n  constructor(props) {\n    super(props);\n\n    this.state = {\n      code: niceware.generatePassphrase(6),\n      submitOpen: false,\n      denom: \"wei\",\n      copied: false,\n      showPassword: false,\n      sendEther: true,\n      selectedToken: { ropsten: \"BOKKY\", main: \"DAI\" },\n      displayBalance: \"0\",\n      realBalance: 0,\n      balanceLoaded: false,\n      balanceEnough: false,\n      resolvedAddr: undefined,\n      resolvedNames: {}\n    };\n  }\n\n  componentDidMount = () => {\n    this.updateBalance(this.state.sendEther);\n  };\n\n  componentDidUpdate(prevProps) {\n    if (\n      this.props.etherclearContractInstance !== undefined &&\n      prevProps.etherclearContractInstance === undefined\n    ) {\n      this.updateBalance(this.state.sendEther);\n    }\n  }\n\n  // TODO: refactor into createPayment() and createTokenPayment().\n  toWeiBN = (amount, denom) => {\n    let sendAmount = toBN(\n      // Assumes amount is valid.\n      window.web3.utils.toWei(toBN(amount).toFixed(), denom)\n    );\n\n    return sendAmount;\n  };\n\n  // TODO: refactor into createPayment() and createTokenPayment().\n  toTokenBN = (amount, denom) => {\n    let tokenInfo = this.props.getTokenMap()[denom];\n    console.log(\"Amount is: \" + amount);\n    // Assumes amount is valid.\n    return toBN(amount).times(toBN(\"10\").pow(tokenInfo.decimals));\n  };\n\n  handleClickShowPassword = () => {\n    this.setState(state => ({ showPassword: !state.showPassword }));\n  };\n\n  refreshCode = event => {\n    this.setState({ code: niceware.generatePassphrase(6), copied: false });\n  };\n\n  toggleSubmitDialog = bool => event => {\n    this.setState({ submitOpen: bool });\n  };\n\n  handleSelectChange = event => {\n    // Update balance if we switch to a new token/ denom\n    if (event.target.name === \"token\") {\n      this.updateBalance(false);\n      let old = this.state.selectedToken;\n      old[this.props.network] = event.target.value;\n      this.setState({ selectedToken: old });\n    } else if (event.target.name === \"denom\") {\n      this.updateBalance(true);\n      this.setState({ [event.target.name]: event.target.value });\n    }\n  };\n\n  // TODO: this needs better error handling\n  getCurrentSelectedToken = () => {\n    let name = this.state.selectedToken[this.props.network];\n    return name === undefined ? \"N/A\" : name;\n  };\n\n  // Taken from https://docs.ens.domains/dapp-developer-guide/resolving-names\n  resolveENSNameToAddr = async name => {\n    try {\n      let val = this.state.resolvedNames[name];\n      if (val === undefined) {\n        let addr = await this.props.ensUtil.resolver(name).addr();\n        let copy = this.state.resolvedNames;\n        copy[name] = addr;\n        this.setState({ resolvedNames: copy, resolvedAddr: addr });\n        console.log(\"got addr: \" + addr);\n      } else {\n        if (this.state.resolvedAddr !== val) {\n          this.setState({ resolvedAddr: val });\n        }\n      }\n    } catch (error) {\n      //console.log(error);\n      if (undefined !== this.state.resolvedAddr) {\n        this.setState({ resolvedAddr: undefined });\n      }\n    }\n  };\n\n  isValidDomainName = name => {\n    return DOMAIN_REGEX.test(name);\n  };\n\n  //  https://web3js.readthedocs.io/en/1.0/web3-utils.html#towei\n  static denomToPrecision = {\n    wei: 1,\n    Kwei: 3,\n    babbage: 3,\n    Mwei: 6,\n    lovelace: 6,\n    Gwei: 9,\n    shannon: 9,\n    microether: 12,\n    szabo: 12,\n    milliether: 15,\n    finney: 15,\n    ether: 18\n  };\n\n  static whitelistedTokensRopsten = [\"BOKKY\"];\n  static whitelistedTokensMainnet = [\n    \"DAI\",\n    \"BAT\",\n    \"OMG\",\n    \"WTC\",\n    \"BNB\",\n    \"MKR\",\n    \"ZRX\",\n    \"ENJ\",\n    \"LINK\",\n    \"PPT\"\n  ];\n\n  static selectedDenoms = [\n    \"wei\",\n    \"Kwei\",\n    \"Mwei\",\n    \"Gwei\",\n    \"microether\",\n    \"milliether\",\n    \"ether\"\n  ];\n\n  getWhitelistedTokens = () => {\n    if (this.props.network === \"main\") {\n      return NewPayment.whitelistedTokensMainnet;\n    } else if (this.props.network === \"ropsten\") {\n      return NewPayment.whitelistedTokensRopsten;\n    } else {\n      return [];\n    }\n  };\n\n  isBadTimeInput = input => {\n    return (\n      this.props.newPayment.holdTime[input].toString() !==\n      parseInt(this.props.newPayment.holdTime[input]).toString()\n    );\n  };\n\n  handleSwitch = async event => {\n    this.updateBalance(!this.state.sendEther);\n    this.setState({ sendEther: !this.state.sendEther });\n  };\n\n  isBalanceEnough = (balance, amount) => {\n    if (!this.isValidAmount(amount)) {\n      return false;\n    } else {\n      let denom = this.state.sendEther\n        ? this.state.denom\n        : this.getCurrentSelectedToken();\n      let rawAmount = this.state.sendEther\n        ? this.toWeiBN(amount, denom)\n        : this.toTokenBN(amount, denom);\n      return !toBN(balance)\n        .minus(rawAmount)\n        .isNegative();\n    }\n  };\n\n  updateIsBalanceEnough = (balance, amount) => {\n    let isBalanceEnough = this.isBalanceEnough(balance, amount);\n    this.setState({ balanceEnough: isBalanceEnough });\n  };\n\n  async updateBalance(useEth) {\n    this.setState({ balanceLoaded: false });\n    let balance;\n\n    // TODO: use a function to display the realBalance instead of\n    // using two vars.\n    let balanceEnough;\n    let realBalance;\n\n    if (useEth) {\n      realBalance = await this.props.updateTokenBalance(\"ETH\");\n      balanceEnough = this.isBalanceEnough(\n        realBalance,\n        this.props.newPayment.amount\n      );\n      balance = toBN(realBalance)\n        .div(toBN(10).pow(toBN(18)))\n        .toFixed();\n    } else {\n      realBalance = await this.props.updateTokenBalance(\n        this.getCurrentSelectedToken()\n      );\n      balanceEnough = this.isBalanceEnough(\n        realBalance,\n        this.props.newPayment.amount\n      );\n      balance = toBN(realBalance)\n        .div(\n          toBN(10).pow(\n            toBN(\n              this.props.getTokenMap()[this.getCurrentSelectedToken()].decimals\n            )\n          )\n        )\n        .toFixed();\n    }\n    console.log(\"balance: \" + balance);\n    this.setState({\n      displayBalance: balance,\n      realBalance: realBalance,\n      balanceLoaded: true,\n      balanceEnough: balanceEnough\n    });\n  }\n\n  countDecimals = numStr => {\n    if (\n      Math.floor(parseFloat(numStr).valueOf()) === parseFloat(numStr).valueOf()\n    )\n      return 0;\n    return numStr.split(\".\")[1].length || 0;\n  };\n\n  isValidAmount = amount => {\n    if (amount === undefined || amount === \"\") {\n      return false;\n    }\n    try {\n      if (this.state.sendEther) {\n        if (this.state.denom === \"wei\") {\n          if (amount.includes(\".\")) {\n            return false;\n          }\n        } else if (\n          this.countDecimals(amount) >\n          parseInt(NewPayment.denomToPrecision[this.state.denom])\n        ) {\n          return false;\n        }\n\n        return true;\n      } else {\n        // Handle token precision (non-ether)\n        let numDecimals = parseInt(\n          this.props.getTokenMap()[this.getCurrentSelectedToken()].decimals\n        );\n        return this.countDecimals(amount) <= numDecimals;\n      }\n    } catch (error) {\n      return false;\n    }\n  };\n\n  updateAmount = event => {\n    this.props.updateNewPayment(\"amount\")(event);\n    this.updateIsBalanceEnough(this.state.realBalance, event.target.value);\n  };\n\n  asyncSetState = instance => newState =>\n    new Promise(resolve => instance.setState(newState, resolve));\n\n  render() {\n    const { classes, breakpoints, currentBreakpoint } = this.props;\n    let passphrase = this.state.code;\n\n    const badAddr =\n      this.state.resolvedAddr === undefined &&\n      (this.props.newPayment.recipient === undefined ||\n        this.props.newPayment.recipient === \"\" ||\n        !window.web3.utils.isAddress(this.props.newPayment.recipient));\n\n    const validAmount = this.isValidAmount(this.props.newPayment.amount);\n\n    const badTimeInput = (() => {\n      for (let key in this.props.newPayment.holdTime) {\n        if (this.isBadTimeInput(key)) {\n          return true;\n        }\n      }\n      return false;\n    })();\n\n    const disableSubmit =\n      badAddr ||\n      !validAmount ||\n      badTimeInput ||\n      this.props.etherclearContractInstance === undefined;\n    const handleFocus = event => event.target.select();\n    const formLabel = {\n      fontSize: \"1.5em\",\n      textDecoration: \"underline\",\n      marginBottom: \"2px\",\n      textAlign: \"left\"\n    };\n\n    // TODO: find a better check than isValidDomainName, it's too general\n    if (this.isValidDomainName(this.props.newPayment.recipient)) {\n      this.resolveENSNameToAddr(this.props.newPayment.recipient);\n    }\n\n    return (\n      <div\n        style={{\n          width:\n            breakpoints[currentBreakpoint] < breakpoints.desktop\n              ? \"90%\"\n              : \"70%\",\n          margin: \"auto\"\n        }}\n      >\n        <div style={{ width: \"100%\", margin: \"auto\" }}>\n          <h3\n            style={{\n              textAlign: \"center\",\n              fontSize: \"1.5em\",\n              fontWeight: \"500\",\n              marginBottom: \"0px\"\n            }}\n          >\n            New Payment\n          </h3>\n          <Divider style={{ width: \"30%\", margin: \"auto\" }} />\n        </div>\n        <div>\n          <p style={formLabel}>Recipient:</p>\n          <TextField\n            id=\"outlined-multiline-static-recipient\"\n            className={classes.textField}\n            onChange={this.props.updateNewPayment(\"recipient\")}\n            style={{ width: \"80%\", marginLeft: \"32px\" }}\n            value={this.props.newPayment.recipient}\n            disabled={false}\n            margin=\"normal\"\n            label={\"Ethereum address\"}\n            helperText={badAddr ? \"Address is not valid\" : \"\"}\n            error={badAddr}\n          />\n          {this.state.resolvedAddr === undefined ? (\n            \"\"\n          ) : (\n            <Tooltip title={this.state.resolvedAddr}>\n              <CheckCircleIcon style={{ color: \"green\" }} />\n            </Tooltip>\n          )}\n        </div>\n        <div>\n          <p style={formLabel}>Amount to send:</p>\n          <form className={classes.root} autoComplete=\"off\">\n            <FormControlLabel\n              control={\n                <Switch\n                  checked={!this.state.sendEther}\n                  onChange={this.handleSwitch}\n                  value=\"Send Tokens\"\n                />\n              }\n              label=\"Send ERC20\"\n            />\n          </form>\n          <Grid container direction=\"row\">\n            <div style={{ width: \"60%\", marginRight: \"10px\" }}>\n              <TextField\n                id=\"outlined-multiline-static-amount\"\n                className={classes.textField}\n                disabled={false}\n                style={{ width: \"80%\", marginLeft: \"30px\" }}\n                value={this.props.newPayment.amount}\n                onChange={this.updateAmount}\n                margin=\"normal\"\n                label={\n                  this.state.sendEther\n                    ? this.state.denom\n                    : this.getCurrentSelectedToken()\n                }\n                type={\"number\"}\n                helperText={\n                  !validAmount\n                    ? \"Amount is not valid\"\n                    : !this.state.balanceLoaded\n                    ? \"Wait for balance to load\"\n                    : !this.state.balanceEnough\n                    ? \"Balance is not enough.\"\n                    : \"\"\n                }\n                error={\n                  !validAmount ||\n                  !this.state.balanceLoaded ||\n                  !this.state.balanceEnough\n                }\n              />\n            </div>\n            <div style={{ width: \"30%\", marginTop: \"2px\" }}>\n              <FormControl className={classes.formControl}>\n                <InputLabel htmlFor=\"denom-helper\">Denomination</InputLabel>\n                <Select\n                  value={\n                    this.state.sendEther\n                      ? this.state.denom\n                      : this.getCurrentSelectedToken()\n                  }\n                  onChange={this.handleSelectChange}\n                  style={{ width: \"90%\" }}\n                  input={\n                    <Input\n                      name={this.state.sendEther ? \"denom\" : \"token\"}\n                      id={\n                        this.state.sendEther ? \"denom-helper\" : \"token-helper\"\n                      }\n                    />\n                  }\n                >\n                  {this.state.sendEther\n                    ? NewPayment.selectedDenoms.map(key => {\n                        return (\n                          <MenuItem\n                            selected={key === this.state.denom}\n                            key={key}\n                            value={key}\n                          >\n                            {key}\n                          </MenuItem>\n                        );\n                      })\n                    : this.getWhitelistedTokens().map(key => {\n                        return (\n                          <MenuItem\n                            selected={key === this.getCurrentSelectedToken()}\n                            key={key}\n                            value={key}\n                          >\n                            {key}\n                          </MenuItem>\n                        );\n                      })}\n                </Select>\n                <FormHelperText />\n              </FormControl>\n            </div>\n          </Grid>\n          <div style={{ width: \"60%\", marginLeft: \"32px\", fontSize: \"0.75em\" }}>\n            Your {this.state.sendEther ? \"ETH\" : this.getCurrentSelectedToken()}{\" \"}\n            balance is {this.state.displayBalance}.\n          </div>\n\n          <br />\n        </div>\n        <p style={formLabel}>Available time window:</p>\n        <p style={{ fontSize: \"0.75em\" }}>\n          The recipient can only retrieve the funds within this amount of time\n          after the transaction is submitted.\n        </p>\n        <div style={{ marginLeft: \"32px\" }}>\n          {[\"days\", \"hours\", \"minutes\"].map(input => {\n            const badTime = this.isBadTimeInput(input);\n            // See https://stackoverflow.com/questions/45939909/put-length-contraint-in-a-textfield-in-react-js\n            return (\n              <Fragment key={input}>\n                <TextField\n                  id={\"outlined-multiline-static-\" + input}\n                  value={this.props.newPayment.holdTime[input]}\n                  className={classes.textField}\n                  disabled={false}\n                  style={{ width: \"20%\" }}\n                  variant=\"standard\"\n                  margin=\"normal\"\n                  label={input}\n                  onChange={this.props.updateNewPaymentTime(\"holdTime\", input)}\n                  type={\"number\"}\n                  error={badTime}\n                  onFocus={handleFocus}\n                  helperText={badTime ? \"Integers only\" : \"\"}\n                  onInput={e => {\n                    e.target.value = Math.max(0, parseInt(e.target.value))\n                      .toString()\n                      .slice(0, 2);\n                  }}\n                />\n              </Fragment>\n            );\n          })}\n        </div>\n        <br />\n\n        <p style={formLabel}>Passphrase: </p>\n        <Grid container direction=\"row\">\n          <TextField\n            id=\"outlined-multiline-static-passphrase\"\n            value={passphrase.join(\" \")}\n            className={classes.textField}\n            disabled={true}\n            margin=\"normal\"\n            label={\"Passphrase\"}\n            style={{ marginLeft: \"32px\", width: \"50%\" }}\n            type={this.state.showPassword ? \"text\" : \"password\"}\n            InputProps={{\n              endAdornment: (\n                <InputAdornment position=\"end\">\n                  <IconButton\n                    aria-label=\"Toggle passphrase visibility\"\n                    onClick={this.handleClickShowPassword}\n                  >\n                    {this.state.showPassword ? (\n                      <VisibilityOff />\n                    ) : (\n                      <Visibility />\n                    )}\n                  </IconButton>\n                </InputAdornment>\n              )\n            }}\n          />\n          <Tooltip title={\"Generate a new code\"}>\n            <IconButton\n              size=\"small\"\n              className={classes.button}\n              variant=\"contained\"\n              color=\"secondary\"\n              onClick={this.refreshCode}\n            >\n              <RefreshIcon />\n            </IconButton>\n          </Tooltip>\n          <CopyToClipboard\n            text={passphrase.join(\" \")}\n            onCopy={() => this.setState({ copied: true })}\n          >\n            <Tooltip title={\"Copy passphrase to clipboard\"}>\n              <IconButton>\n                <FileCopyIcon />\n              </IconButton>\n            </Tooltip>\n          </CopyToClipboard>{\" \"}\n          {this.state.copied ? (\n            <span style={{ color: \"red\" }}>Copied.</span>\n          ) : null}\n        </Grid>\n        <br />\n        <div style={{ width: \"90%\" }}>\n          <Divider />\n        </div>\n        <Grid\n          container\n          direction=\"row\"\n          justify=\"space-between\"\n          style={{ width: \"90%\" }}\n        >\n          <div>\n            <p style={{ fontSize: \"0.7em\" }}>\n              **All transactions are charged a 0.001 ETH base fee along with a\n              payment fee (separate from gas costs) to help maintain this\n              service.\n            </p>\n          </div>\n          <MediaQuery query=\"(min-width: 1300px)\">\n            {matches => {\n              if (matches) {\n                return (\n                  <div>\n                    <Button\n                      className={classes.button}\n                      classes={{\n                        label: classes.buttonText\n                      }}\n                      variant=\"contained\"\n                      onClick={this.toggleSubmitDialog(true)}\n                      color=\"primary\"\n                      disabled={disableSubmit}\n                      size=\"small\"\n                    >\n                      Submit\n                    </Button>\n\n                    <Button\n                      className={classes.cancelButton}\n                      color=\"secondary\"\n                      onClick={this.props.toggleNew(false)}\n                      size=\"small\"\n                    >\n                      Cancel\n                    </Button>\n                  </div>\n                );\n              } else {\n                return (\n                  <div style={{ width: \"100%\" }}>\n                    <Grid container direction=\"row-reverse\" justify=\"center\">\n                      <Button\n                        className={classes.button}\n                        onClick={this.toggleSubmitDialog(true)}\n                        disabled={disableSubmit}\n                        size=\"medium\"\n                      >\n                        Submit\n                      </Button>\n                      <Button\n                        className={classes.button}\n                        onClick={this.props.toggleNew(false)}\n                        size=\"medium\"\n                      >\n                        Cancel\n                      </Button>\n                    </Grid>\n                  </div>\n                );\n              }\n            }}\n          </MediaQuery>\n          {disableSubmit ? (\n            \"\"\n          ) : (\n            <SubmitDialog\n              open={this.state.submitOpen}\n              newPayment={this.props.newPayment}\n              badAddr={badAddr}\n              code={passphrase.join(\" \")}\n              toggleSubmit={this.toggleSubmitDialog}\n              createPayment={this.props.createPayment}\n              denom={this.state.denom}\n              token={this.getCurrentSelectedToken()}\n              sendEther={this.state.sendEther}\n              etherclearContractInstance={this.props.etherclearContractInstance}\n              getTokenMap={this.props.getTokenMap}\n              calculateFees={this.props.calculateFees}\n              calculateSendAmount={this.props.calculateSendAmount}\n            />\n          )}\n        </Grid>\n        <br />\n        {disableSubmit ? (\n          <div>\n            <p\n              style={{\n                color: \"red\",\n                fontSize: \"0.75em\",\n                textAlign: \"center\",\n                marginBottom: \"32px\"\n              }}\n            >\n              Correct errors before submitting.\n            </p>\n          </div>\n        ) : this.props.etherclearContractInstance === undefined ? (\n          <div>\n            <p\n              style={{\n                color: \"red\",\n                fontSize: \"0.75em\",\n                textAlign: \"center\",\n                marginBottom: \"32px\"\n              }}\n            >\n              Can't load Etherclear contract instance, please refresh and try\n              again.\n            </p>\n          </div>\n        ) : (\n          \"\"\n        )}\n      </div>\n    );\n  }\n}\n\nNewPayment.propTypes = {\n  classes: PropTypes.object.isRequired\n};\n\nexport default withStyles(styles, { withTheme: theme })(\n  withBreakpoints(NewPayment)\n);\n","/**\n * Payment Row component is a single\n * row of the Payments Index\n * It will hold no state and use the payment prop passed from\n * parent to display info about payment\n */\nimport React from \"react\";\nimport { withRouter } from \"react-router-dom\";\nimport { TableCell, TableRow } from \"@material-ui/core\";\nimport { createMuiTheme } from \"@material-ui/core/styles\";\nimport { withTheme } from \"@material-ui/styles\";\nimport MediaQuery from \"react-responsive\";\nimport App from \"./App\";\n\n// custom mui theme\nconst theme = createMuiTheme();\n\nconst PaymentStatus = { OPEN: 0, CLOSED: 1, CANCELLED: 2 };\n\nconst PaymentRow = props => {\n  const { payment, history } = props;\n  let paymentStatusText;\n  switch (parseInt(payment.state)) {\n    case PaymentStatus.OPEN:\n      paymentStatusText = \"OPEN\";\n      break;\n    case PaymentStatus.CLOSED:\n      paymentStatusText = \"CLOSED\";\n      break;\n    case PaymentStatus.CANCELLED:\n      paymentStatusText = \"CANCELLED\";\n      break;\n    default:\n      paymentStatusText = \"ERROR\";\n  }\n\n  // TODO: new Date(0) is probably not a good way to fail here.\n  const openDate =\n    payment.paymentOpenTime === 0\n      ? new Date(0)\n      : new Date(payment.paymentOpenTime * 1000);\n\n  const dateOptions = {\n    year: \"numeric\",\n    month: \"short\",\n    day: \"numeric\",\n    minute: \"numeric\",\n    hour: \"numeric\"\n  };\n\n  let symbol = props.tokenAddrToSymbol()[payment.token.toLowerCase()];\n  let numDecimals = 18;\n  if (symbol !== \"ETH\") {\n    numDecimals = parseInt(props.getTokenMap()[symbol].decimals);\n  }\n\n  let utils = window.web3.utils;\n\n  let amount =\n    symbol === \"ETH\"\n      ? utils.fromWei(payment.sendAmount.toString(), \"ether\")\n      : payment.sendAmount / Math.pow(10, numDecimals);\n\n  return (\n    <TableRow\n      hover\n      onClick={() =>\n        history.push(`/app/payment/${payment.paymentId}`, { payment })\n      }\n    >\n      <TableCell>{openDate.toLocaleString(\"en\", dateOptions)}</TableCell>\n\n      <MediaQuery query=\"(min-device-width: 1200px)\">\n        {matched => {\n          if (matched) {\n            return <TableCell>{amount}</TableCell>;\n          } else {\n            return \"\";\n          }\n        }}\n      </MediaQuery>\n      <TableCell>{symbol}</TableCell>\n      <TableCell>{paymentStatusText}</TableCell>\n    </TableRow>\n  );\n};\n\nexport default withTheme(withRouter(PaymentRow));\n","import React, { Component } from \"react\";\nimport {\n  Divider,\n  Grid,\n  IconButton,\n  Table,\n  TableBody,\n  TableCell,\n  TableHead,\n  TableRow,\n  TextField,\n  Tooltip\n} from \"@material-ui/core\";\nimport MediaQuery from \"react-responsive\";\nimport { createMuiTheme } from \"@material-ui/core/styles\";\nimport { withTheme } from \"@material-ui/styles\";\nimport RefreshIcon from \"@material-ui/icons/Refresh\";\nimport PaymentRow from \"./PaymentRow\";\nimport FormControlLabel from \"@material-ui/core/FormControlLabel\";\nimport Checkbox from \"@material-ui/core/Checkbox\";\n\n// custom mui theme\nconst theme = createMuiTheme();\n\nclass PaymentsIndex extends Component {\n  constructor(props) {\n    super(props);\n    // payment type will always be OPEN or CLOSED\n    this.state = {\n      paymentType: \"all\"\n    };\n    this.latestTsFirst = this.latestTsFirst.bind(this);\n    this.onFilterChange = this.onFilterChange.bind(this);\n  }\n\n  // Custom comparator to sort payments with the most\n  // recent at the top.\n  latestTsFirst = (a, b) => {\n    if (a.paymentOpenTime > b.paymentOpenTime) return -1;\n    if (b.paymentOpenTime > a.paymentOpenTime) return 1;\n\n    return 0;\n  };\n\n  refreshPayments = async () => {\n    // Note: This will set the openPayments and closedPayments as well.\n    await this.props.getPaymentEvents();\n  };\n\n  /**\n   * OnFilterChange takes in the checked checkbox from\n   * clicked item and sets state of paymentType to value\n   *\n   * @param\n   * checked: obj\n   *\n   */\n  onFilterChange = item => this.setState({ paymentType: item.value });\n\n  render() {\n    const {\n      allPayments,\n      openPayments,\n      closedPayments,\n      loadingPayments\n    } = this.props;\n    const { paymentType } = this.state;\n\n    // when filtering by age validDaysInput makes sure it is\n    // an ok input\n    const validDaysInput = !isNaN(parseInt(this.props.daysInput));\n\n    // makes header mobile responsive\n    const headerWidth = window.screen.width < 1200 ? \"75%\" : \"22%\";\n\n    const headerSize = window.screen.width < 1200 ? \"1.7em\" : \"2em\";\n\n    const dynamicFont = window.screen.width < 1200 ? \".8em\" : \"1.5em\";\n\n    return (\n      <div style={{ padding: \"40px\" }}>\n        <div style={{ width: headerWidth, margin: \"auto\" }}>\n          <h3\n            style={{\n              fontSize: headerSize,\n              textAlign: \"center\",\n              fontWeight: \"500\",\n              marginBottom: \"0px\"\n            }}\n          >\n            My Payments\n          </h3>\n          <Divider />\n        </div>\n        <div style={{ marginLeft: \"24px\" }}>\n          <Grid container direction=\"row\">\n            <p style={{ fontWeight: \"500\", fontSize: \"1.2em\" }}>\n              Filter Payments\n            </p>\n            <IconButton\n              onClick={this.refreshPayments}\n              disabled={\n                this.props.etherclearContractInstance === undefined ||\n                !validDaysInput ||\n                loadingPayments\n              }\n            >\n              <Tooltip\n                title={\n                  loadingPayments\n                    ? \"Loading...\"\n                    : \"Click to refresh payment list\"\n                }\n              >\n                <RefreshIcon />\n              </Tooltip>\n            </IconButton>\n          </Grid>\n\n          <TextField\n            id=\"outlined-multiline-static\"\n            onChange={this.props.updateDaysInput}\n            value={this.props.daysInput}\n            disabled={this.props.etherclearContractInstance === undefined}\n            margin=\"normal\"\n            label={\"Past days\"}\n            helperText={\n              validDaysInput\n                ? \"# of past days to display payments\"\n                : \"Invalid input.\"\n            }\n            error={!validDaysInput}\n          />\n\n          <Grid container direction=\"column\">\n            <FormControlLabel\n              control={\n                <Checkbox\n                  checked={paymentType === \"all\"}\n                  onChange={event => this.onFilterChange(event.target)}\n                  value=\"all\"\n                />\n              }\n              style={{ fontSize: \"0.75em\" }}\n              label=\"All Payments\"\n            />\n            <FormControlLabel\n              control={\n                <Checkbox\n                  checked={paymentType === \"OPEN\"}\n                  onChange={event => this.onFilterChange(event.target)}\n                  value=\"OPEN\"\n                />\n              }\n              label=\"Open Payments\"\n            />\n            <FormControlLabel\n              control={\n                <Checkbox\n                  checked={paymentType === \"CLOSED\"}\n                  onChange={event => this.onFilterChange(event.target)}\n                  value=\"CLOSED\"\n                />\n              }\n              label=\"Closed Payments\"\n            />\n          </Grid>\n        </div>\n\n        <div style={{ width: \"100%\", paddingLeft: \"16px\" }}>\n          {paymentType === \"OPEN\" ? (\n            <div>\n              <h3\n                style={{\n                  fontSize: \"1.5em\",\n                  marginBottom: \"4px\",\n                  fontWeight: \"400\"\n                }}\n              >\n                Open Payments\n              </h3>\n\n              <Table style={{ minWidth: \"330px\" }}>\n                <TableHead>\n                  <TableRow>\n                    <TableCell>Date Sent</TableCell>\n                    <MediaQuery query=\"(min-device-width: 1200px)\">\n                      {matched => {\n                        if (matched) {\n                          return <TableCell>Amount Sent</TableCell>;\n                        } else {\n                          return \"\";\n                        }\n                      }}\n                    </MediaQuery>\n                    <TableCell>Token</TableCell>\n                    <TableCell>Payment Status</TableCell>\n                  </TableRow>\n                </TableHead>\n                <TableBody>\n                  {openPayments.length > 0 ? (\n                    openPayments.map(payment => (\n                      <PaymentRow\n                        key={payment.paymentId}\n                        payment={payment}\n                        getTokenMap={this.props.getTokenMap}\n                        tokenAddrToSymbol={this.props.tokenAddrToSymbol}\n                      />\n                    ))\n                  ) : (\n                    <tr />\n                  )}\n                </TableBody>\n              </Table>\n              {openPayments.length > 0 ? (\n                \"\"\n              ) : (\n                <div style={{ marginTop: \"32px\" }}>\n                  <h3\n                    style={{\n                      color: \"gray\",\n                      textAlign: \"center\",\n                      textDecoration: \"underline\",\n                      fontSize: dynamicFont,\n                      fontWeight: \"normal\"\n                    }}\n                  >\n                    {/* TODO: refactor these messages */}\n                    {this.props.etherclearContractInstance === undefined\n                      ? \"Contract instance not loaded\"\n                      : loadingPayments\n                      ? \"Loading...\"\n                      : \"No open payments for this date range.\"}\n                  </h3>\n                </div>\n              )}\n            </div>\n          ) : paymentType === \"CLOSED\" ? (\n            <div>\n              <h3\n                style={{\n                  fontSize: \"1.5em\",\n                  marginBottom: \"4px\",\n                  fontWeight: \"400\"\n                }}\n              >\n                Closed Payments\n              </h3>\n              <Table>\n                <TableHead>\n                  <TableRow>\n                    <TableCell>Date Sent</TableCell>\n                    <MediaQuery query=\"(min-device-width: 1200px)\">\n                      {matched => {\n                        if (matched) {\n                          return <TableCell>Amount Sent</TableCell>;\n                        } else {\n                          return \"\";\n                        }\n                      }}\n                    </MediaQuery>\n                    <TableCell>Token</TableCell>\n                    <TableCell>Payment Status</TableCell>\n                  </TableRow>\n                </TableHead>\n                <TableBody>\n                  {closedPayments.length > 0 ? (\n                    closedPayments.map(payment => (\n                      <PaymentRow\n                        key={payment.paymentId}\n                        payment={payment}\n                        getTokenMap={this.props.getTokenMap}\n                        tokenAddrToSymbol={this.props.tokenAddrToSymbol}\n                      />\n                    ))\n                  ) : (\n                    <tr />\n                  )}\n                </TableBody>\n              </Table>\n              {closedPayments.length > 0 ? (\n                \"\"\n              ) : (\n                <div style={{ marginTop: \"32px\" }}>\n                  <h3\n                    style={{\n                      color: \"gray\",\n                      textAlign: \"center\",\n                      textDecoration: \"underline\",\n                      fontSize: dynamicFont,\n                      fontWeight: \"normal\"\n                    }}\n                  >\n                    {this.props.etherclearContractInstance === undefined\n                      ? \"Contract instance not loaded\"\n                      : loadingPayments\n                      ? \"Loading...\"\n                      : \"No closed payments for this date range.\"}\n                  </h3>\n                </div>\n              )}\n            </div>\n          ) : (\n            <div>\n              <h3\n                style={{\n                  fontSize: \"1.5em\",\n                  marginBottom: \"4px\",\n                  fontWeight: \"400\"\n                }}\n              >\n                All Payments\n              </h3>\n              <Table>\n                <TableHead>\n                  <TableRow>\n                    <TableCell>Date Sent</TableCell>\n                    <MediaQuery query=\"(min-device-width: 1200px)\">\n                      {matched => {\n                        if (matched) {\n                          return <TableCell>Amount Sent</TableCell>;\n                        } else {\n                          return \"\";\n                        }\n                      }}\n                    </MediaQuery>\n                    <TableCell>Token</TableCell>\n                    <TableCell>Payment Status</TableCell>\n                  </TableRow>\n                </TableHead>\n                <TableBody style={{ width: \"90%\" }}>\n                  {allPayments.length > 0 ? (\n                    allPayments.map(payment => (\n                      <PaymentRow\n                        key={payment.paymentId}\n                        payment={payment}\n                        getTokenMap={this.props.getTokenMap}\n                        tokenAddrToSymbol={this.props.tokenAddrToSymbol}\n                      />\n                    ))\n                  ) : (\n                    <tr />\n                  )}\n                </TableBody>\n              </Table>\n              {allPayments.length > 0 ? (\n                \"\"\n              ) : (\n                <div style={{ marginTop: \"32px\" }}>\n                  <h3\n                    style={{\n                      color: \"gray\",\n                      textAlign: \"center\",\n                      textDecoration: \"underline\",\n                      fontSize: dynamicFont,\n                      fontWeight: \"normal\"\n                    }}\n                  >\n                    {this.props.etherclearContractInstance === undefined\n                      ? \"Contract instance not loaded\"\n                      : loadingPayments\n                      ? \"Loading...\"\n                      : \"No payments for this date range.\"}\n                  </h3>\n                </div>\n              )}\n            </div>\n          )}\n        </div>\n      </div>\n    );\n  }\n}\n\nexport default withTheme(PaymentsIndex);\n","import React from \"react\";\nimport { ListItem, List, Badge, Drawer } from \"@material-ui/core\";\nimport { withRouter } from \"react-router-dom\";\nimport { makeStyles, useTheme } from '@material-ui/styles';\nimport { Link } from \"react-router-dom\";\n\n\n\n\n\n  // custom styles for MUI Components\nconst useStyles = makeStyles( theme => ({\n  paper: {\n      background: theme.palette.primary.main,\n    },\n  badgeStyles: {\n    color: 'white',\n    zIndex: '1',\n  },\n  badgeSpacing: {\n    marginLeft: '32px',\n  },\n  }));\n\nconst SideNavBar = props => {\n  const { appEvents } = props;\n  // (we have to have this theme var but its unused????)\n  // eslint-disable-next-line\n  const theme = useTheme();\n  // use custom MUI styles with theme passed throught\n  const classes = useStyles();\n  const eventCount =\n    Object.keys(appEvents).length < 1 ? null : Object.keys(appEvents).length;\n\n  return (\n    <Drawer\n      variant=\"permanent\"\n      anchor=\"left\"\n      open\n      className={classes.paper}\n      classes={{ paper: classes.paper }}\n    >\n      <div style={{ marginBottom: \"32px\", marginTop: \"24px\" }}>\n        <Link to={\"/\"}>\n          <img src={require(\"./text-logo.png\")} alt=\"Etherclear Logo\" />\n        </Link>\n      </div>\n      <div>\n        <List>\n          {[\n            [\"My Payments\", \"/app/payments\"],\n            [\"App Events\", \"/app/\"],\n          ].map((navItem, index) => (\n            <div key={index}>\n              {navItem[0] === \"App Events\" ? (\n                <Link to={navItem[1]} style={{ textDecoration: \"none\" }}>\n                  <ListItem button key={index}>\n                    <Badge badgeContent={eventCount} classes={{\n                      badge: classes.badgeStyles,\n                    }} color=\"secondary\">\n                      <p\n                        style={{\n                          color: \"white\",\n                          marginTop: '4px',\n                          fontSize: '1.2em',\n                          fontWeight: '400',\n                          marginRight: '6px',\n                          textDecoration:\n                            props.location.pathname === navItem[1]\n                              ? \"underline\"\n                              : \"none\"\n                        }}\n                      >\n                        {navItem[0]}\n                      </p>\n                    </Badge>\n                  </ListItem>\n                </Link>\n              ) : (\n                <Link to={navItem[1]} style={{ textDecoration: \"none\" }}>\n                  <ListItem button key={index}>\n                    <p\n                      style={{\n                        color: \"white\",\n                        fontSize: '1.2em',\n                        fontWeight: '400',\n                        textDecoration:\n                          props.location.pathname === navItem[1]\n                            ? \"underline\"\n                            : \"none\"\n                      }}\n                    >\n                      {navItem[0]}\n                    </p>\n                  </ListItem>\n                </Link>\n              )}\n            </div>\n          ))}\n        </List>\n      </div>\n    </Drawer>\n  );\n};\n\nexport default withRouter(SideNavBar);\n","import React from \"react\";\nimport Button from \"@material-ui/core/Button\";\nimport Dialog from \"@material-ui/core/Dialog\";\nimport { createMuiTheme } from \"@material-ui/core/styles\";\nimport { withTheme } from \"@material-ui/styles\";\nimport DialogActions from \"@material-ui/core/DialogActions\";\nimport DialogContent from \"@material-ui/core/DialogContent\";\nimport DialogContentText from \"@material-ui/core/DialogContentText\";\nimport DialogTitle from \"@material-ui/core/DialogTitle\";\nimport Divider from \"@material-ui/core/Divider\";\n\n// custom mui theme\nconst theme = createMuiTheme();\n\nclass CancelPaymentDialog extends React.Component {\n  constructor(props) {\n    super(props);\n  }\n\n  cancelPayment = () => {\n    this.props.cancelPayment(this.props.payment.paymentId);\n    this.props.toggleCancel(false)();\n  };\n\n  cancelPaymentFeeless = () => {\n    this.props.cancelPaymentFeeless(this.props.payment.paymentId);\n    this.props.toggleCancel(false)();\n  };\n\n  shortStr = (str, len) => {\n    return str.substring(0, len) + \"...\";\n  };\n  render() {\n    const key = this.props._key;\n    return (\n      <div>\n        <Dialog\n          open={this.props.open}\n          onClose={this.props.toggleCancel(false)}\n          aria-labelledby={\"cancel-dialog-title\" + key}\n          aria-describedby={\"cancel-dialog-description\" + key}\n        >\n          <DialogTitle id={\"cancel-dialog-title\" + key}>\n            {\"Cancel payment \" +\n              this.shortStr(this.props.payment.paymentId, 10)}\n          </DialogTitle>\n          <DialogContent>\n            <DialogContentText id={\"cancel-dialog-description\" + key}>\n              This action will return funds back to you and close the payment.\n            </DialogContentText>\n          </DialogContent>\n          <Divider />\n          <DialogActions>\n            <Button onClick={this.cancelPayment} color=\"primary\">\n              Confirm\n            </Button>\n            <Button onClick={this.cancelPaymentFeeless} color=\"primary\">\n              Confirm (Feeless)\n            </Button>\n            <Button\n              onClick={this.props.toggleCancel(false)}\n              color=\"primary\"\n              autoFocus\n            >\n              Go Back\n            </Button>\n          </DialogActions>\n        </Dialog>\n      </div>\n    );\n  }\n}\n\nexport default withTheme(CancelPaymentDialog);\n","import React from \"react\";\nimport Button from \"@material-ui/core/Button\";\nimport Dialog from \"@material-ui/core/Dialog\";\nimport DialogActions from \"@material-ui/core/DialogActions\";\nimport { createMuiTheme, withTheme } from '@material-ui/core/styles';\nimport DialogContent from \"@material-ui/core/DialogContent\";\nimport DialogContentText from \"@material-ui/core/DialogContentText\";\nimport DialogTitle from \"@material-ui/core/DialogTitle\";\nimport TextField from \"@material-ui/core/TextField/TextField\";\nimport Divider from \"@material-ui/core/Divider\";\n\nconst theme = createMuiTheme();\n\nclass WithdrawDialog extends React.Component {\n  state = {\n    open: false,\n    passphraseInput: \"\"\n  };\n\n  updatePassphraseInput = event => {\n    this.setState({ passphraseInput: event.target.value });\n  };\n\n  retrieveFunds = feeless => () => {\n    if (feeless) {\n      this.props.retrieveFundsFeeless(\n        this.props.payment.paymentId,\n        this.state.passphraseInput,\n        this.props.payment.sender\n      );\n    } else {\n      this.props.retrieveFunds(\n        this.props.payment.paymentId,\n        this.state.passphraseInput\n      );\n    }\n    this.props.toggleWithdraw(false)();\n  };\n\n  isPassphraseCorrect = passphrase => {\n    return (\n      this.props.payment.codeHash ===\n      window.web3.utils.soliditySha3(passphrase, this.props.payment.recipient)\n    );\n  };\n\n  render() {\n    const passphraseCorrect = this.isPassphraseCorrect(\n      this.state.passphraseInput\n    );\n    const classes = this.props;\n    const key = this.props._key;\n    return (\n      <div>\n        <Dialog\n          open={this.props.open}\n          onClose={this.props.toggleWithdraw(false)}\n          aria-labelledby={\"alert-dialog-title\" + key}\n          aria-describedby={\"alert-dialog-description\" + key}\n        >\n          <DialogTitle id={\"alert-dialog-title\" + key}>\n            {\"Enter passphrase for payment \" +\n              this.props.payment.paymentId.substring(0, 12) +\n              \"...\"}\n          </DialogTitle>\n          <DialogContent>\n            <DialogContentText id={\"alert-dialog-description\" + key}>\n              Enter the passphrase that has been sent by the recipient for this\n              payment:\n            </DialogContentText>\n            <TextField\n              id=\"outlined-multiline-static\"\n              className={classes.textField}\n              onChange={this.updatePassphraseInput}\n              value={this.state.passphraseInput}\n              disabled={false}\n              margin=\"normal\"\n              label={\"Passphrase\"}\n              variant=\"outlined\"\n              helperText={\n                passphraseCorrect\n                  ? \"Passphrase is correct!\"\n                  : \"Error: Wrong passphrase\"\n              }\n              error={!passphraseCorrect}\n            />\n          </DialogContent>\n          <Divider />\n          <DialogActions>\n            <Button\n              onClick={this.retrieveFunds(false)}\n              disabled={!passphraseCorrect}\n              color=\"primary\"\n            >\n              Submit\n            </Button>\n            <Button\n              onClick={this.retrieveFunds(true)}\n              disabled={!passphraseCorrect}\n              color=\"primary\"\n            >\n              Submit (feeless)\n            </Button>\n            <Button\n              onClick={this.props.toggleWithdraw(false)}\n              color=\"primary\"\n              autoFocus\n            >\n              Cancel\n            </Button>\n          </DialogActions>\n        </Dialog>\n      </div>\n    );\n  }\n}\n\nexport default withTheme((WithdrawDialog));\n","import React from \"react\";\nimport { Button, Divider, Grid, TextField } from \"@material-ui/core\";\nimport lightGreen from \"@material-ui/core/colors/lightGreen\";\nimport red from \"@material-ui/core/colors/red\";\nimport { withBreakpoints } from \"react-breakpoints\";\nimport { withRouter } from \"react-router-dom\";\nimport { createMuiTheme, withStyles } from \"@material-ui/core/styles\";\nimport OpenInNew from \"@material-ui/icons/OpenInNew\";\nimport IconButton from \"@material-ui/core/IconButton/IconButton\";\nimport ArrowBackIcon from \"@material-ui/icons/ArrowBack\";\nimport App from \"./App\";\nimport CancelPaymentDialog from \"./CancelPaymentDialog\";\nimport WithdrawDialog from \"./WithdrawDialog\";\n\n// custom mui theme\nconst theme = createMuiTheme();\n\nconst styles = theme => ({\n  buttonLabel: {\n    color: \"white\"\n  },\n  button: {\n    color: theme.palette.secondary.main\n  }\n});\n\n// Returns true if to and from address are equal\nconst addrEquals = (str1, str2) => {\n  try {\n    return str1.toLowerCase() === str2.toLowerCase();\n  } catch (err) {\n    return str1 === str2;\n  }\n};\n\n/**\n * PaymentDetails is the component that renders\n * information and action buttons for specific payment\n */\n\nclass PaymentDetails extends React.Component {\n  state = {\n    openCancel: false,\n    openWithdraw: false,\n    recipientName: null,\n    senderName: null\n  };\n\n  toggleWithdraw = bool => () => {\n    this.setState({ openWithdraw: bool });\n  };\n\n  toggleCancel = bool => () => {\n    this.setState({ openCancel: bool });\n  };\n\n  fetchENSNames = async txn => {\n    let recipientName = await this.props.getCachedAddrForENSName(txn.recipient);\n    let senderName = await this.props.getCachedAddrForENSName(txn.sender);\n    this.setState({ recipientName, senderName });\n  };\n\n  render() {\n    // returns whether payment is OPEN, CLOSED or CANCELLED\n    const PaymentStatus = { OPEN: 0, CLOSED: 1, CANCELLED: 2 };\n    // need this for breakpoints\n    const { breakpoints, currentBreakpoint } = this.props;\n\n    // used t map payment status to payment.state\n    const PaymentStatusToName = {\n      0: \"OPEN\",\n      1: \"COMPLETED\",\n      2: \"CANCELLED\"\n    };\n\n    const handleBackButton = () => this.props.history.push(\"/app/payments\");\n\n    const account =\n      this.props.allAccounts === undefined || this.props.allAccounts === []\n        ? 0\n        : this.props.allAccounts[0];\n\n    const txn = this.props.payment;\n\n    const openDate =\n      txn.paymentOpenTime === 0\n        ? undefined\n        : new Date(txn.paymentOpenTime * 1000);\n    const closeDate =\n      txn.paymentCloseTime === 0 || txn.paymentCloseTime === undefined\n        ? undefined\n        : new Date(txn.paymentCloseTime * 1000);\n\n    const shortAddr = (string, num) => {\n      return string.substring(0, num) + \"...\";\n    };\n\n    const fromOrTo = (() => {\n      if (addrEquals(account, txn.recipient)) {\n        if (addrEquals(account, txn.sender)) {\n          return \"SELF PAYMENT\";\n        } else {\n          return \"FROM: \" + shortAddr(txn.sender, 12);\n        }\n      } else {\n        return \"TO: \" + shortAddr(txn.recipient, 12);\n      }\n    })();\n\n    const status = txn.state;\n\n    // TODO: should be latest block TS.\n    const currTs = Date.now();\n\n    if (this.state.recipientName === null || this.state.senderName === null) {\n      this.fetchENSNames(txn);\n    }\n\n    let recipientName =\n      this.state.recipientName === undefined\n        ? txn.recipient\n        : this.state.recipientName;\n    let senderName =\n      this.state.senderName === undefined ? txn.sender : this.state.senderName;\n\n    const renderRecipientActions = (txn, timeLeft) => {\n      return (\n        <React.Fragment>\n          <Button\n            variant=\"contained\"\n            color=\"primary\"\n            disabled={status !== PaymentStatus.OPEN || timeLeft === 0}\n            size=\"small\"\n            onClick={this.toggleWithdraw(true)}\n          >\n            Withdraw Funds\n          </Button>\n          <WithdrawDialog\n            _key={this.props._key}\n            toggleWithdraw={this.toggleWithdraw}\n            open={this.state.openWithdraw}\n            retrieveFunds={this.props.retrieveFunds}\n            retrieveFundsFeeless={this.props.retrieveFundsFeeless}\n            payment={txn}\n          />\n        </React.Fragment>\n      );\n    };\n\n    const renderSenderActions = (txn, timeLeft) => {\n      const { classes } = this.props;\n      return (\n        <React.Fragment>\n          <Button\n            variant=\"contained\"\n            color=\"secondary\"\n            className={classes.button}\n            classes={{\n              label: classes.buttonLabel\n            }}\n            disabled={status !== PaymentStatus.OPEN}\n            size=\"small\"\n            onClick={this.toggleCancel(true)}\n          >\n            Cancel Payment\n          </Button>\n          <CancelPaymentDialog\n            _key={this.props._key}\n            toggleCancel={this.toggleCancel}\n            open={this.state.openCancel}\n            cancelPayment={this.props.cancelPayment}\n            cancelPaymentFeeless={this.props.cancelPaymentFeeless}\n            payment={txn}\n          />\n        </React.Fragment>\n      );\n    };\n\n    // TODO: defined twice.\n    const formatTimeJSON = jsonStr => {\n      return (\n        \"Days: \" +\n        jsonStr[\"days\"] +\n        \", Hours: \" +\n        jsonStr[\"hours\"] +\n        \", Minutes: \" +\n        jsonStr[\"minutes\"]\n      );\n    };\n\n    let utils = window.web3.utils;\n\n    // TODO: this logic is repeated in PaymentsIndex\n    let symbol = this.props.tokenAddrToSymbol()[txn.token.toLowerCase()];\n    let numDecimals = 18;\n\n    if (symbol !== \"ETH\") {\n      // TODO: this happens when we don't have the network, and\n      // return an empty tokenMap. This is probably not the\n      // best way to handle it, since it's a silent failure\n      // and it will be left as the default.\n      if (this.props.getTokenMap()[symbol] !== undefined) {\n        numDecimals = parseInt(this.props.getTokenMap()[symbol].decimals);\n      }\n    }\n\n    let amount =\n      symbol === \"ETH\"\n        ? utils.fromWei(txn.sendAmount.toString(), \"ether\")\n        : txn.sendAmount / Math.pow(10, numDecimals);\n\n    // TODO: need to use block timestamp here, unless accuracy +/- 15 min is not needed.\n    let timeLeft =\n      txn.paymentOpenTime * 1000 + txn.holdTime * 1000 > currTs\n        ? 1000 * txn.paymentOpenTime + 1000 * txn.holdTime - currTs\n        : 0;\n\n    const bodyWidth = window.screen.width < 1200 ? \"75%\" : \"100%\";\n\n    // changes color of payment status\n    // depending on whether it is open, closed or cancelled\n    let statusColor =\n      PaymentStatusToName[status] === \"OPEN\" ? lightGreen[500] : red[800];\n\n    // helps the flex-box be more mobile\n    // responsive\n    const flexLayout = window.screen.width < 1200 ? \"column-reverse\" : \"row\";\n\n    const dynamicFont = window.screen.width < 1200 ? \".70em\" : \"1em\";\n\n    const dateOptions = {\n      year: \"numeric\",\n      month: \"short\",\n      day: \"numeric\",\n      minute: \"numeric\",\n      hour: \"numeric\"\n    };\n\n    const toLocaleString = date => {\n      return date.toLocaleString(\"en\", dateOptions);\n    };\n\n    return (\n      <div\n        style={{\n          padding: \"40px\",\n          width:\n            breakpoints[currentBreakpoint] < breakpoints.desktop\n              ? \"75%\"\n              : \"90%\",\n          marginLeft: \"32px\"\n        }}\n      >\n        <Grid\n          container\n          direction=\"row\"\n          justify=\"flex-start\"\n          alignItems=\"center\"\n        >\n          <IconButton onClick={() => handleBackButton()}>\n            <ArrowBackIcon fontSize=\"large\" color=\"primary\" />\n          </IconButton>\n        </Grid>\n\n        <Grid\n          container\n          direction=\"column\"\n          justify=\"center\"\n          alignContent=\"center\"\n        >\n          <h3\n            style={{\n              fontSize: \"2em\",\n              textAlign: \"center\",\n              fontWeight: \"500\",\n              marginBottom: \"0px\"\n            }}\n          >\n            Payment Details\n          </h3>\n          <p\n            style={{\n              marginTop: \"4px\",\n              marginBottom: \"0px\",\n              textAlign: \"center\"\n            }}\n          >\n            {fromOrTo}\n          </p>\n          <p\n            style={{\n              marginTop: \"2px\",\n              marginBottom: \"4px\",\n              textAlign: \"center\",\n              fontSize: \".75em\"\n            }}\n          >\n            {toLocaleString(openDate)}\n          </p>\n          <Divider variant=\"fullWidth\" />\n        </Grid>\n        <Grid container direction={flexLayout} justify=\"space-between\">\n          <div>\n            <div>\n              <div style={{ fontSize: dynamicFont }}>\n                <Grid container direction=\"column\" justify=\"space-evenly\">\n                  <p>\n                    <strong>Payment ID:</strong>{\" \"}\n                    {shortAddr(\n                      window.web3.utils.toBN(txn.paymentId).toString(),\n                      12\n                    )}\n                  </p>\n                  <p>\n                    <strong>From:</strong> {senderName}\n                  </p>\n                  <p>\n                    <strong>To:</strong> {recipientName}\n                  </p>\n                  <Grid container direction=\"row\">\n                    <p style={{ marginRight: \"8px\" }}>\n                      <strong> Amount:</strong> {amount}\n                    </p>\n                    <p>\n                      <strong> Token:</strong> {symbol}\n                    </p>\n                  </Grid>\n                  <p>\n                    <strong>Time opened:</strong> {toLocaleString(openDate)}\n                  </p>\n                  <p>\n                    <strong>Time closed:</strong>{\" \"}\n                    {closeDate === undefined\n                      ? \"N/A\"\n                      : toLocaleString(closeDate)}\n                  </p>\n                  <p>\n                    <strong> Holding period:</strong>{\" \"}\n                    {formatTimeJSON(millisToJSON(txn.holdTime * 1000))}\n                  </p>\n                </Grid>\n                <br />\n                <h3 style={{ textDecoration: \"underline\", fontSize: \"2em\" }}>\n                  {\" \"}\n                  Transaction Hashes:{\" \"}\n                </h3>\n                <br />\n                <div>\n                  <Grid container direction=\"row\" alignContent=\"center\">\n                    <p style={{ marginRight: \"16px\", marginTop: \"16px\" }}>\n                      <strong>Payment opened:</strong>\n                    </p>\n                    <IconButton\n                      href={this.props.getEtherscanTxnURL(txn.openHash)}\n                      target={\"_blank\"}\n                    >\n                      <OpenInNew />\n                    </IconButton>\n                  </Grid>\n                  <TextField\n                    id={\n                      \"outlined-multiline-static-hash-0-\" +\n                      this.props.uniqueKey +\n                      \"-\" +\n                      this.props._key\n                    }\n                    style={{ marginLeft: \"16px\" }}\n                    value={txn.openHash}\n                    disabled\n                  />\n                </div>\n                {status === PaymentStatus.OPEN ? (\n                  \"\"\n                ) : (\n                  <div style={{ width: \"50%\" }}>\n                    <Grid container direction=\"row\">\n                      <p style={{ marginRight: \"16px\", marginTop: \"16px\" }}>\n                        <strong>Payment closed:</strong>\n                      </p>\n                      <IconButton\n                        href={this.props.getEtherscanTxnURL(txn.closeHash)}\n                        size=\"small\"\n                        target={\"_blank\"}\n                      >\n                        <OpenInNew />\n                      </IconButton>\n                    </Grid>\n                    <TextField\n                      id={\n                        \"outlined-multiline-static-hash-1-\" +\n                        this.props.uniqueKey +\n                        \"-\" +\n                        this.props._key\n                      }\n                      value={txn.closeHash}\n                      style={{ marginLeft: \"16px\" }}\n                      disabled\n                      margin=\"normal\"\n                      label=\"Transaction hash\"\n                    />\n                  </div>\n                )}\n                <br />\n                {status !== PaymentStatus.OPEN ? (\n                  <React.Fragment>\n                    <p>This payment is closed.</p>\n                  </React.Fragment>\n                ) : (\n                  \"\"\n                )}\n                {timeLeft === 0 ? (\n                  <React.Fragment>\n                    <p style={{ marginLeft: \"80px\" }}>\n                      The time window to complete payment has closed.\n                    </p>\n                  </React.Fragment>\n                ) : (\n                  \"\"\n                )}\n              </div>\n            </div>\n          </div>\n          <div style={{ margin: \"auto\", marginTop: \"16px\" }}>\n            <h3\n              style={{\n                fontSize: \"2.5em\",\n                textAlign: \"center\",\n                color: statusColor,\n                fontWeight: \"bold\",\n                marginBottom: \"0px\"\n              }}\n            >\n              {PaymentStatusToName[status]}\n            </h3>\n            <p style={{ fontSize: \"0.75em\", marginTop: \"2px\" }}>\n              Time left: {formatTimeJSON(millisToJSON(timeLeft))}\n            </p>\n          </div>\n        </Grid>\n        <Divider />\n        <div style={{ width: \"100%\", marginLeft: \"40px\" }}>\n          <Grid container direction=\"row\" justify=\"space-between\">\n            {addrEquals(account, txn.recipient)\n              ? renderRecipientActions(txn, timeLeft)\n              : \"\"}\n            {addrEquals(account, txn.sender)\n              ? renderSenderActions(txn, timeLeft)\n              : \"\"}\n          </Grid>\n        </div>\n      </div>\n    );\n  }\n}\n\nfunction millisToJSON(ms) {\n  let d, h, m, s;\n  s = Math.floor(ms / 1000);\n  m = Math.floor(s / 60);\n  s = s % 60;\n  h = Math.floor(m / 60);\n  m = m % 60;\n  d = Math.floor(h / 24);\n  h = h % 24;\n  return { days: d, hours: h, minutes: m, seconds: s };\n}\n\nexport default withStyles(styles, { withTheme: theme })(\n  withBreakpoints(withRouter(PaymentDetails))\n);\n","import React, { Component } from \"react\";\nimport { withRouter } from \"react-router-dom\";\nimport { Paper, Tabs, Tab, Badge } from \"@material-ui/core\";\nimport { withStyles, createMuiTheme } from '@material-ui/core/styles';\nimport PhoneIcon from \"@material-ui/icons/Phone\";\nimport grey from \"@material-ui/core/colors/grey\";\nimport FavoriteIcon from \"@material-ui/icons/Favorite\";\nimport PersonPinIcon from \"@material-ui/icons/PersonPin\";\n\n\n// custom mui theme\nconst theme = createMuiTheme();\n\nconst styles = {\n  badgeStyles: {\n    color: 'white',\n  },\n}\nclass MobileNavBar extends Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      value: 0\n    };\n\n    this.tabClick = this.tabClick.bind(this);\n  }\n\n  // handles animation change on tabs\n  handleChange = (event, value) => {\n    this.setState({ value });\n  };\n\n  // handles redirects when tabs are clicked\n  // eslint-disable-next-line\n  tabClick = url => this.props.history.push(url);\n\n  render() {\n    // for counting notifications\n    // eslint-disable-next-line\n    const { appEvents, history, classes } = this.props;\n    // TODO: this code is not DRY, need to make count its own prop\n    // eslint-disable-next-line\n    const eventCount =\n      Object.keys(appEvents).length < 1 ? null : Object.keys(appEvents).length;\n\n    /* eslint-disable */\n    return (\n      <Paper square>\n        <Tabs\n          value={this.state.value}\n          onChange={this.handleChange}\n          variant=\"fullWidth\"\n          style={{ backgroundColor: \"#3b9eb5\", paddingTop: \"8px\" }}\n          indicatorColor=\"secondary\"\n          textColor={\"primary\"}\n        >\n          <Tab\n            style={{ color: \"white\", paddingTop: \"4px\" }}\n            label={\n              <Badge badgeContent={eventCount} color=\"secondary\" classes={{\n                badge: classes.badgeStyles,\n              }}>\n                <p style={{ marginTop: '4px', marginRight: '6px' }}>App Events</p>\n              </Badge>\n            }\n            onClick={() => this.tabClick(\"/app\")}\n          />\n          <Tab\n            style={{ color: \"white\" }}\n            label={\"My Payments\"}\n            onClick={() => this.tabClick(\"/app/payments\")}\n          />\n        </Tabs>\n      </Paper>\n    );\n    /** eslint-disable */\n  }\n}\n\nexport default withStyles(styles, { withTheme : theme })(withRouter(MobileNavBar));\n","import React, { Component } from \"react\";\nimport { withStyles, createMuiTheme } from \"@material-ui/core/styles\";\nimport {\n  Divider,\n  Grid,\n  IconButton,\n  TextField,\n  Tooltip\n} from \"@material-ui/core\";\nimport RefreshIcon from \"@material-ui/core/SvgIcon/SvgIcon\";\nimport FormControlLabel from \"@material-ui/core/FormControlLabel/FormControlLabel\";\nimport Checkbox from \"@material-ui/core/Checkbox/Checkbox\";\nimport FormControl from \"@material-ui/core/FormControl\";\nimport InputLabel from \"@material-ui/core/InputLabel\";\nimport Select from \"@material-ui/core/Select/Select\";\nimport Input from \"@material-ui/core/Input/Input\";\nimport MenuItem from \"@material-ui/core/MenuItem/MenuItem\";\nimport FormHelperText from \"@material-ui/core/FormHelperText/FormHelperText\";\nimport { withRouter } from \"react-router\";\nimport Button from \"@material-ui/core/Button/Button\";\n\nconst theme = createMuiTheme();\nconst styles = theme => ({\n  root: {\n    width: \"100%\"\n  },\n  heading: {\n    fontSize: theme.typography.pxToRem(15),\n    flexBasis: \"33.33%\",\n    flexShrink: 0\n  },\n  appBar: {\n    position: \"relative\",\n    width: \"100%\",\n    backgroundColor: \"#3c9eb5\"\n  },\n  toolbarTitle: {\n    flex: 1\n  },\n  formControl: {\n    margin: theme.spacing(1),\n    minWidth: 120\n  },\n  secondaryHeading: {\n    fontSize: theme.typography.pxToRem(15),\n    color: theme.palette.text.secondary\n  },\n  button: {\n    margin: theme.spacing(1)\n  },\n  input: {\n    display: \"none\"\n  }\n});\n\n// TODO: need an update button, and a \"contract retrieved successfully\", and \"contract updated\"\n// default contract address should be the last one pulled from the registry.\n// current contract version\nclass Settings extends Component {\n  getEtherclearArtifactURL = (network, address) => {\n    return (\n      \"https://cdn.jsdelivr.net/gh/etherclearapp/etherclear_artifacts/Etherclear/\" +\n      network +\n      \"/\" +\n      address +\n      \"/Etherclear.json\"\n    );\n  };\n\n  versionLabel = (name, address) => {\n    return name + \" - \" + address;\n  };\n\n  handleVersionChange = event => {\n    this.setState({\n      selectedVersion: {\n        name: event.target.value.name,\n        address: event.target.value.address\n      },\n      errorMessage: \"\"\n    });\n  };\n\n  updateContractVersion = () => {\n    this.setState({ errorMessage: \"Fetching contract from Github\" });\n    let addr = this.state.selectedVersion.address;\n    let url = this.getEtherclearArtifactURL(this.props.network, addr);\n    fetch(url)\n      .then(async res => {\n        if (res.status > 200) {\n          // Errored.\n          let error = await res.text();\n          this.setState({\n            errorMessage: \"got an error: \" + JSON.stringify(error)\n          });\n          return;\n        } else {\n          let res2 = await res.json();\n          this.props.registerContractInstance(res2);\n          this.setState({\n            errorMessage: \"Initiated contract update\"\n          });\n        }\n      })\n      .catch(err => {\n        // TODO: handle error\n        console.error(err);\n      });\n  };\n\n  defaultVersion = () => {\n    return {\n      name: \"N/A\",\n      address: \"N/A\"\n    };\n  };\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      selectedVersion: this.defaultVersion(),\n      fetchedVersions: false,\n      errorMessage: undefined\n    };\n  }\n\n  render() {\n    // makes header mobile responsive\n    const headerWidth = window.screen.width < 1200 ? \"75%\" : \"22%\";\n\n    const headerSize = window.screen.width < 1200 ? \"1.7em\" : \"2em\";\n\n    const dynamicFont = window.screen.width < 1200 ? \".8em\" : \"1.5em\";\n\n    // Update contract versions if we haven't already\n    if (!this.state.fetchedVersions && this.props.contractVersions.length > 0) {\n      // TODO: this causes a console error Cannot update during an existing state transition (such as within `render`)\n      this.setState({\n        selectedVersion: this.props.contractVersions[\n          this.props.contractVersions.length - 1\n        ],\n        fetchedVersions: true\n      });\n    }\n\n    // TODO: if contract list is undefined then disable button\n    const disableUpdate =\n      this.props.contractVersions.length === 0 ||\n      this.props.network === undefined;\n\n    const { classes } = this.props;\n    return (\n      <div style={{ padding: \"40px\" }}>\n        <div style={{ width: headerWidth, margin: \"auto\" }}>\n          <h3\n            style={{\n              fontSize: headerSize,\n              textAlign: \"center\",\n              fontWeight: \"500\",\n              marginBottom: \"0px\"\n            }}\n          >\n            Settings\n          </h3>\n          <Divider />\n        </div>\n        <div style={{ marginLeft: \"24px\" }}>\n          <p style={{ fontWeight: \"500\", fontSize: \"1.2em\" }}>\n            Select Contract Version\n          </p>\n          <div style={{ marginLeft: \"24px\" }}>\n            <React.Fragment>\n              <FormControl className={classes.formControl}>\n                <Select\n                  value={this.state.selectedVersion}\n                  renderValue={value => {\n                    return this.versionLabel(value.name, value.address);\n                  }}\n                  fullWidth\n                  onChange={this.handleVersionChange}\n                  input={<Input name={\"version\"} id={\"version-helper\"} />}\n                  disabled={!this.state.fetchedVersions}\n                >\n                  {this.props.contractVersions.map(key => {\n                    // TODO: There could still be multiple versions that have the same information, not sure how to handle that.\n                    // TODO: get selected background for the active menu item working here.\n                    return (\n                      <MenuItem\n                        selected={\n                          key.address === this.state.selectedVersion.address &&\n                          key.name === this.state.selectedVersion.name\n                        }\n                        key={key.name}\n                        value={key}\n                      >\n                        {this.versionLabel(key.name, key.address)}\n                      </MenuItem>\n                    );\n                  })}\n                </Select>\n                <FormHelperText />\n              </FormControl>\n            </React.Fragment>\n          </div>\n          <Button\n            className={classes.button}\n            classes={{\n              label: classes.buttonText\n            }}\n            variant=\"contained\"\n            onClick={this.updateContractVersion}\n            color=\"primary\"\n            disabled={disableUpdate}\n            size=\"small\"\n          >\n            Update\n          </Button>\n          <p>{this.state.errorMessage}</p>\n        </div>\n      </div>\n    );\n  }\n}\n\nexport default withStyles(styles, { withTheme: theme })(Settings);\n","import React from \"react\";\nimport { Link } from \"react-router-dom\";\nimport { withStyles, createMuiTheme } from \"@material-ui/core/styles\";\nimport { withTheme } from \"@material-ui/styles\";\nimport Button from \"@material-ui/core/Button\";\nimport ListIcon from \"@material-ui/icons/List\";\nimport Menu from \"@material-ui/core/Menu\";\nimport MenuItem from \"@material-ui/core/MenuItem\";\nimport ListItemText from \"@material-ui/core/ListItemText\";\n\nconst theme = createMuiTheme();\n\nconst StyledMenu = withStyles({\n  paper: {\n    border: \"1px solid #d3d4d5\"\n  }\n})(props => (\n  <Menu\n    elevation={0}\n    getContentAnchorEl={null}\n    anchorOrigin={{\n      vertical: \"bottom\",\n      horizontal: \"center\"\n    }}\n    transformOrigin={{\n      vertical: \"top\",\n      horizontal: \"center\"\n    }}\n    {...props}\n  />\n));\n\nconst StyledMenuItem = withStyles(theme => ({\n  root: {\n    \"&:focus\": {\n      backgroundColor: \"#d3d4d5\",\n      \"& .MuiListItemIcon-root, & .MuiListItemText-primary\": {\n        color: theme.palette.common.white\n      }\n    }\n  }\n}))(MenuItem);\n\nconst CustomizedMenus = props => {\n  const [anchorEl, setAnchorEl] = React.useState(null);\n\n  function handleClick(event) {\n    setAnchorEl(event.currentTarget);\n  }\n\n  function handleClose() {\n    setAnchorEl(null);\n  }\n\n  // make sure there is no text decoration\n  const linkStyles = {\n    textDecoration: \"none\"\n  };\n\n  return (\n    <div>\n      <Button\n        aria-owns={anchorEl ? \"simple-menu\" : undefined}\n        aria-haspopup=\"true\"\n        variant=\"contained\"\n        color=\"primary\"\n        onClick={handleClick}\n      >\n        <ListIcon />\n      </Button>\n      <StyledMenu\n        id=\"simple-menu\"\n        anchorEl={anchorEl}\n        open={Boolean(anchorEl)}\n        onClose={handleClose}\n      >\n        <StyledMenuItem>\n          <Link to=\"/\" style={linkStyles}>\n            <ListItemText primary=\"Home\" />\n          </Link>\n        </StyledMenuItem>\n        <StyledMenuItem>\n          <a\n            href=\"https://etherclearapp.github.io/etherclear_docs/#/\"\n            style={linkStyles}\n            target={\"_blank\"}\n          >\n            <ListItemText primary=\"What is Etherclear?\" />\n          </a>\n        </StyledMenuItem>\n        <StyledMenuItem>\n          <Link to=\"/app/settings\" style={linkStyles} onClick={handleClose}>\n            <ListItemText primary=\"Settings\" />\n          </Link>\n        </StyledMenuItem>\n      </StyledMenu>\n    </div>\n  );\n};\n\nexport default withTheme(CustomizedMenus);\n","import React from \"react\";\nimport { makeStyles } from \"@material-ui/core/styles\";\nimport Drawer from \"@material-ui/core/Drawer\";\nimport Button from \"@material-ui/core/Button\";\nimport { Link } from \"react-router-dom\";\nimport { Grid, TextField, Tooltip, IconButton, Fab } from \"@material-ui/core\";\nimport List from \"@material-ui/core/List\";\nimport ListIcon from \"@material-ui/icons/List\";\nimport AddIcon from \"@material-ui/icons/Add\";\nimport ArrowBackIcon from \"@material-ui/icons/ArrowBack\";\nimport Divider from \"@material-ui/core/Divider\";\nimport ListItem from \"@material-ui/core/ListItem\";\nimport ListItemIcon from \"@material-ui/core/ListItemIcon\";\nimport ListItemText from \"@material-ui/core/ListItemText\";\nimport InboxIcon from \"@material-ui/icons/MoveToInbox\";\nimport { CopyToClipboard } from \"react-copy-to-clipboard\";\nimport FileCopyIcon from \"@material-ui/icons/FileCopy\";\nimport MailIcon from \"@material-ui/icons/Mail\";\n\nconst MobileSideDrawer = props => {\n  const { contractDisplayName, displayName, addr, noAddr } = props;\n  const [state, setState] = React.useState({\n    top: false,\n    left: false,\n    bottom: false,\n    right: false\n  });\n\n  const toggleDrawer = (side, open) => event => {\n    if (\n      event.type === \"keydown\" &&\n      (event.key === \"Tab\" || event.key === \"Shift\")\n    ) {\n      return;\n    }\n\n    setState({ ...state, [side]: open });\n  };\n\n  // style for nav links\n  const linkStyles = {\n    textDecoration: \"none\"\n  };\n\n  const sideList = side => (\n    <div\n      role=\"presentation\"\n      onClick={toggleDrawer(side, false)}\n      onKeyDown={toggleDrawer(side, false)}\n    >\n      <div>\n        {/* Mobile Header Goes in here */}\n\n        <div style={{ width: \"95%\" }}>\n          <Grid container direction=\"row\" justify=\"flex-start\">\n            <Button color=\"primary\" onClick={toggleDrawer(\"left\", false)}>\n              <ArrowBackIcon />\n            </Button>\n          </Grid>\n          <div style={{ width: \"90%\", margin: \"auto\" }}>\n            <Grid container direction=\"row\" justify=\"center\">\n              <img\n                src={require(\"./logo.svg\")}\n                alt=\"Etherclear\"\n                style={{\n                  width: \"200px\",\n                  marginTop: \"32px\",\n                  marginBottom: \"24px\"\n                }}\n              />\n            </Grid>\n            <Grid container direction=\"row\">\n              <div>\n                <div>\n                  <p\n                    style={{\n                      textAlign: \"left\",\n                      marginLeft: \"8px\",\n                      fontSize: \"1em\",\n                      marginBottom: \"0px\"\n                    }}\n                  >\n                    <a\n                      href={props.getEtherscanAddressURL(\n                        props.getEtherclearContractAddress()\n                      )}\n                      target={\"_blank\"}\n                    >\n                      Contract:{\" \"}\n                    </a>\n                  </p>\n                  <TextField\n                    disabled\n                    style={{\n                      marginLeft: \"24px\",\n                      width: \"70%\",\n                      marginBottom: \"16px\"\n                    }}\n                    value={\n                      contractDisplayName === undefined\n                        ? \"\"\n                        : contractDisplayName\n                    }\n                  />\n                </div>\n                <div>\n                  <Grid container direction=\"row\">\n                    <p\n                      style={{\n                        textAlign: \"left\",\n                        marginLeft: \"8px\",\n                        fontSize: \"1em\",\n                        marginBottom: \"0px\"\n                      }}\n                    >\n                      My Address:\n                    </p>\n                    <TextField\n                      disabled\n                      style={{\n                        marginLeft: \"24px\",\n                        width: \"70%\",\n                        marginBottom: \"16px\"\n                      }}\n                      value={displayName === undefined ? \"\" : displayName}\n                    />\n                    <CopyToClipboard\n                      text={addr}\n                      disabled={addr === noAddr || addr === undefined}\n                    >\n                      <Tooltip title={\"Copy address to clipboard\"}>\n                        <IconButton>\n                          <FileCopyIcon />\n                        </IconButton>\n                      </Tooltip>\n                    </CopyToClipboard>\n                  </Grid>\n                </div>\n              </div>\n            </Grid>\n          </div>\n        </div>\n      </div>\n      <Divider />\n      <List>\n        <ListItem button>\n          <Link to=\"/\" style={linkStyles}>\n            <ListItemText primary=\"Home\" />\n          </Link>\n        </ListItem>\n        <ListItem button>\n          <Link\n            to=\"/app/settings\"\n            style={linkStyles}\n            onClick={toggleDrawer(side, false)}\n          >\n            <ListItemText primary=\"Settings\" />\n          </Link>\n        </ListItem>\n        <ListItem button>\n          <a\n            href=\"https://etherclearapp.github.io/etherclear_docs/#/\"\n            style={linkStyles}\n            target={\"_blank\"}\n          >\n            <ListItemText primary=\"What is Etherclear?\" />\n          </a>\n        </ListItem>\n      </List>\n    </div>\n  );\n\n  return (\n    <div>\n      <Fab color=\"primary\" size=\"small\" onClick={toggleDrawer(\"left\", true)}>\n        <ListIcon />\n      </Fab>\n      <Drawer open={state.left} onClose={toggleDrawer(\"left\", false)}>\n        {sideList(\"left\")}\n      </Drawer>\n    </div>\n  );\n};\n\nexport default MobileSideDrawer;\n","import React, { Component } from \"react\";\nimport \"./App.css\";\nimport Web3 from \"web3\";\nimport { Link, Route, withRouter } from \"react-router-dom\";\nimport MediaQuery from \"react-responsive\";\nimport etherclearContractDefinition from \"./contracts/Etherclear.json\";\nimport registryContractDefinition from \"./contracts/Registry.json\";\nimport IERC20ContractDefinition from \"./contracts/IERC20.json\";\nimport AddIcon from \"@material-ui/icons/Add\";\nimport { Divider, Fab, Grid, TextField } from \"@material-ui/core/\";\nimport FileCopyIcon from \"@material-ui/icons/FileCopy\";\nimport PropTypes from \"prop-types\";\nimport { createMuiTheme, withStyles } from \"@material-ui/core/styles\";\n// TODO: have one source of truth for whitelisted tokens.\nimport EventExpansionPanel from \"./EventExpansionPanel\";\nimport { CopyToClipboard } from \"react-copy-to-clipboard\";\nimport { API_ROOT, getEndpointForVersion } from \"./api-config\";\nimport NewPayment from \"./NewPayment\";\nimport Button from \"@material-ui/core/Button\";\nimport ReactBreakpoints from \"react-breakpoints\";\nimport Tooltip from \"@material-ui/core/Tooltip\";\nimport IconButton from \"@material-ui/core/IconButton\";\nimport { logo } from \"./text-logo.png\";\nimport PaymentsIndex from \"./PaymentsIndex\";\nimport SideNavBar from \"./SideNavBar\";\nimport PaymentDetails from \"./PaymentDetails\";\nimport MobileNavBar from \"./MobileNavBar\";\nimport Settings from \"./Settings\";\nimport MuiThemeProvider from \"@material-ui/core/styles/MuiThemeProvider\";\nimport { ThemeProvider } from \"@material-ui/styles\";\nimport CustomizedMenus from \"./DropDownNav\";\nimport MobileSideDrawer from \"./MobileSideDrawer\";\nimport mainnetTokenData from \"./tokenData.json\";\n\n/**\n * Breakpoints are for device breakpoints\n * Currently using to dynmically render the side nav bar (on computer)\n * or the tabs for mobile devices\n */\nconst breakpoints = {\n  mobile: 360,\n  mobileLandscape: 480,\n  tablet: 768,\n  tabletLandscape: 1024,\n  desktop: 1200,\n  desktopLarge: 1500,\n  desktopWide: 1920\n};\n\nvar contract = require(\"truffle-contract\");\n\n// TODO: bump this down to 400000\n// This is used when getting the initial gas estimate\nconst GAS = \"600000\";\n// We multiply the gas estimate by this amount when estimating\nconst GAS_ESTIMATE_MULTIPLIER = 1.2;\n// TODO: get this from web3 or ethGasStation\nconst GAS_PRICE_GWEI = \"8\";\nconst ROPSTEN = \"3\";\n\nconst defaultDisplayDays = 5;\n\nconst sleep = milliseconds => {\n  return new Promise(resolve => setTimeout(resolve, milliseconds));\n};\n\nconst infuraProvider = new Web3.providers.HttpProvider(\n  \"https://ropsten.infura.io\"\n);\n\n// TODO: clean this up\nvar ENS = require(\"ethereum-ens\");\n\nconst BigNumber = require(\"bignumber.js\");\n\n// TODO: export from Homepage\nconst theme = createMuiTheme({\n  palette: {\n    primary: {\n      light: \"#757ce8\",\n      main: \"#3c9eb5\",\n      dark: \"#506184\",\n      contrastText: \"#fff\"\n    },\n    secondary: {\n      light: \"#ff7961\",\n      main: \"#f44336\",\n      dark: \"#ba000d\",\n      contrastText: \"#000\"\n    }\n  },\n  typography: {\n    useNextVariants: true\n  }\n});\n\nconst styles = theme => ({\n  root: {\n    width: \"100%\"\n  },\n  heading: {\n    fontSize: theme.typography.pxToRem(15),\n    flexBasis: \"33.33%\",\n    flexShrink: 0\n  },\n  appBar: {\n    position: \"relative\",\n    width: \"100%\",\n    backgroundColor: \"#3c9eb5\"\n  },\n  toolbarTitle: {\n    flex: 1\n  },\n  formControl: {\n    margin: theme.spacing(1),\n    minWidth: 120\n  },\n  secondaryHeading: {\n    fontSize: theme.typography.pxToRem(15),\n    color: theme.palette.text.secondary\n  },\n  button: {\n    margin: theme.spacing(1)\n  },\n  input: {\n    display: \"none\"\n  }\n});\n\nconst toBN = num => {\n  return new BigNumber(num);\n};\n\nclass App extends Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      openNew: false,\n      newPayment: {\n        id: \"\",\n        recipient: \"\",\n        amount: \"0\",\n        holdTime: { days: 365, hours: 0, minutes: 0, seconds: 0 }\n      },\n      allPayments: [],\n      openPayments: [],\n      closedPayments: [],\n      loadingPayments: false,\n      accounts: [],\n      menuOpen: {\n        openTx: { withdraw: -1, cancel: -1 },\n        closedTx: { withdraw: -1, cancel: -1 }\n      },\n      events: {},\n      daysInput: defaultDisplayDays,\n      mainAddrENSName: null,\n      contractAddrENSName: null,\n      addrToName: {},\n      etherclearContractDefinition: etherclearContractDefinition,\n      etherclearContractInstance: undefined,\n      registryContractInstance: undefined,\n      contractVersions: [],\n      // We use \"paymentFeeWei\" because it's an integer amount that represents a percentage of 1 ether, in Wei\n      paymentFeeWei: undefined,\n      baseFeeWei: undefined,\n      thisContractVersion: \"prod\"\n    };\n\n    this.onNewPaymentClick = this.onNewPaymentClick.bind(this);\n  }\n\n  toggleNew = bool => event => {\n    this.setState({ openNew: bool });\n  };\n\n  updateNewPayment = key => event => {\n    let newPayment = this.state.newPayment;\n    newPayment[key] = event.target.value;\n    this.setState({ newPayment });\n  };\n\n  updateNewPaymentTime = (key, duration) => event => {\n    let newPayment = this.state.newPayment;\n    newPayment[key][duration] = event.target.value;\n    this.setState({ newPayment });\n  };\n\n  getEtherscanURL = (endpoint, param) => {\n    if (this.state.network === \"ropsten\") {\n      return \"https://ropsten.etherscan.io/\" + endpoint + \"/\" + param;\n    } else if (this.state.network === \"main\") {\n      return \"https://etherscan.io/\" + endpoint + \"/\" + param;\n    } else {\n      console.log(\n        \"error: no etherscan URL supported for current network: \" +\n          this.state.network\n      );\n      return \"\";\n    }\n  };\n\n  getENS = () => {\n    return new ENS(this.getInfuraProvider());\n  };\n\n  getEtherscanAddressURL = addr => {\n    return this.getEtherscanURL(\"address\", addr);\n  };\n\n  getEtherscanTxnURL = hash => {\n    return this.getEtherscanURL(\"tx\", hash);\n  };\n\n  displayHashWithLinkMsg = (msg, hash) => {\n    return (\n      <div>\n        {\" \"}\n        {msg}{\" \"}\n        <a href={this.getEtherscanTxnURL(hash)} target=\"_blank\">\n          {hash}\n        </a>\n      </div>\n    );\n  };\n\n  // when new payment button clicks, sends to payments page\n  onNewPaymentClick = () => this.props.history.push(\"/app/newPayment\");\n\n  updateDaysInput = event => {\n    this.setState({ daysInput: event.target.value });\n  };\n\n  // TODO: need to handle error cases for other networks\n  getInfuraProvider = () => {\n    // TODO: not sure what to return if network is undefined.\n    if (this.state.network === undefined || this.state.network === \"main\") {\n      return new Web3.providers.HttpProvider(\"https://mainnet.infura.io\");\n    } else if (this.state.network === \"ropsten\") {\n      return new Web3.providers.HttpProvider(\"https://ropsten.infura.io\");\n    }\n  };\n\n  getEnsUtil = () => {\n    let provider = this.getInfuraProvider();\n    return new ENS(provider);\n  };\n\n  getInfuraWeb3 = () => {\n    let provider = this.getInfuraProvider();\n    const infuraWeb3 = new Web3(provider);\n    return infuraWeb3;\n  };\n\n  // We store mappings in case there are multiple payments to\n  // or from the same address.\n  getCachedAddrForENSName = async addr => {\n    let copy = this.state.addrToName;\n    let cachedAddr = this.state.addrToName[addr];\n    if (cachedAddr === undefined) {\n      let result = await this.resolveAddrToENSName(addr);\n      copy[addr] = result;\n      this.setState({ addrToName: copy });\n      return result;\n    } else {\n      return cachedAddr;\n    }\n  };\n\n  // Returns undefined if the name cannot be resolved\n  // for any reason.\n  resolveAddrToENSName = async addr => {\n    try {\n      let name = await this.getENS()\n        .reverse(addr)\n        .name();\n      // Check to be sure the reverse record is correct.\n      if (\n        name === null ||\n        addr !==\n          (await this.getENS()\n            .resolver(name)\n            .addr())\n      ) {\n        name = undefined;\n      }\n      return name;\n      // TODO: Better error handling? This occurs when\n      // the ENS name is not found\n    } catch (error) {\n      console.log(error);\n      return undefined;\n    }\n  };\n\n  setMainAddrENSName = async addr => {\n    let name = await this.resolveAddrToENSName(addr);\n    this.setState({ mainAddrENSName: name });\n  };\n\n  setContractAddrENSName = async addr => {\n    let name = await this.resolveAddrToENSName(addr);\n    this.setState({ contractAddrENSName: name });\n  };\n\n  render() {\n    const { classes } = this.props;\n    const { events } = this.state;\n\n    const noAddr = \"N/A\";\n\n    const addr =\n      this.state.accounts === [] || this.state.accounts === undefined\n        ? noAddr\n        : this.state.accounts[0];\n\n    let displayName;\n    if (\n      this.state.mainAddrENSName !== null &&\n      this.state.mainAddrENSName !== undefined\n    ) {\n      displayName = this.state.mainAddrENSName;\n    } else {\n      displayName = addr;\n    }\n\n    // Get contract address name\n    // Check if undefined (means that there was no name found)\n    let contractDisplayName;\n    if (\n      this.state.contractAddrENSName !== null &&\n      this.state.contractAddrENSName !== undefined\n    ) {\n      contractDisplayName = this.state.contractAddrENSName;\n    } else {\n      contractDisplayName = this.getEtherclearContractAddress();\n    }\n\n    // NOTE: This is the current mobile/laptop breakpoint for etherclear\n    const mobileBreakpoint = 1200;\n\n    const bodyWidth = window.innerWidth < mobileBreakpoint ? \"100%\" : \"88%\";\n\n    // makes headers on dashboard mobile responsive\n    const headerWidth = window.innerWidth < mobileBreakpoint ? \"50%\" : \"22%\";\n\n    // styling for \"No accounts detected\"\n    // & \"Ropsten not detected\" styling\n    const noCredentialsMessage = {\n      fontSize: \"1em\",\n      fontWeight: \"500\",\n      textDecoration: \"underline\",\n      textAlign: \"center\",\n      color: \"gray\"\n    };\n\n    const gridHeight = window.innerWidth < mobileBreakpoint ? null : \"100vh\";\n\n    // TODO: classes.grow not defined\n    return (\n      <ReactBreakpoints breakpoints={breakpoints}>\n        <div>\n          <MuiThemeProvider theme={theme}>\n            <MediaQuery query={`(min-width: ${mobileBreakpoint}px)`}>\n              {matches => {\n                if (matches) {\n                  return (\n                    <Grid\n                      container\n                      direction=\"row\"\n                      justify=\"flex-end\"\n                      style={{ padding: \"24px\" }}\n                    >\n                      <CustomizedMenus />\n                    </Grid>\n                  );\n                } else {\n                  return \"\";\n                }\n              }}\n            </MediaQuery>\n            <Grid\n              container\n              direction=\"row\"\n              style={{ fontSize: \"16px\", height: gridHeight }}\n            >\n              <MediaQuery query={`(min-width: ${mobileBreakpoint}px)`}>\n                {matches => {\n                  if (matches) {\n                    return (\n                      <div style={{ width: \"20%\", flex: \"1\" }}>\n                        <SideNavBar appEvents={events} />\n                      </div>\n                    );\n                  } else {\n                    return (\n                      <div style={{ width: \"100%\" }}>\n                        <MobileNavBar appEvents={events} />\n                      </div>\n                    );\n                  }\n                }}\n              </MediaQuery>\n              <div style={{ width: bodyWidth }}>\n                <div className={classes.root}>\n                  <div>\n                    <div style={{ marginBottom: \"24px\" }}>\n                      <Grid container direction=\"column\" alignItems=\"center\">\n                        {/* Header Section */}\n                        <MediaQuery\n                          query={`(min-width: ${mobileBreakpoint}px)`}\n                        >\n                          {matches => {\n                            if (matches) {\n                              return (\n                                <div style={{ width: \"100%\" }}>\n                                  <Grid\n                                    container\n                                    direction=\"row\"\n                                    justify=\"center\"\n                                    style={{ marginBottom: \"16px\" }}\n                                  >\n                                    <img\n                                      src={require(\"./logo.svg\")}\n                                      style={{\n                                        width: \"360px\",\n                                        marginTop: \"24px\"\n                                      }}\n                                      alt=\"Etherclear\"\n                                    />\n                                  </Grid>\n                                  <Grid\n                                    container\n                                    direction=\"row\"\n                                    justify=\"center\"\n                                  >\n                                    <div>\n                                      <div>\n                                        <p\n                                          style={{\n                                            textAlign: \"left\",\n                                            marginLeft: \"8px\",\n                                            fontSize: \"1em\",\n                                            marginBottom: \"0px\"\n                                          }}\n                                        >\n                                          <a\n                                            href={this.getEtherscanAddressURL(\n                                              this.getEtherclearContractAddress()\n                                            )}\n                                            target={\"_blank\"}\n                                          >\n                                            Contract:{\" \"}\n                                          </a>\n                                        </p>\n                                        <TextField\n                                          disabled\n                                          style={{\n                                            marginLeft: \"24px\",\n                                            width: \"85%\",\n                                            marginBottom: \"16px\"\n                                          }}\n                                          value={\n                                            contractDisplayName === undefined\n                                              ? \"\"\n                                              : contractDisplayName\n                                          }\n                                        />\n                                      </div>\n                                      <Grid container direction=\"row\">\n                                        <p\n                                          style={{\n                                            textAlign: \"left\",\n                                            marginLeft: \"8px\",\n                                            fontSize: \"1em\",\n                                            marginBottom: \"0px\"\n                                          }}\n                                        >\n                                          My Address:\n                                        </p>\n                                        <TextField\n                                          disabled\n                                          style={{\n                                            marginLeft: \"24px\",\n                                            width: \"75%\",\n                                            marginBottom: \"16px\"\n                                          }}\n                                          value={\n                                            displayName === undefined\n                                              ? \"\"\n                                              : displayName\n                                          }\n                                        />\n                                        <CopyToClipboard\n                                          text={addr}\n                                          disabled={\n                                            addr === noAddr ||\n                                            addr === undefined\n                                          }\n                                        >\n                                          <IconButton>\n                                            <Tooltip\n                                              title={\n                                                \"Copy address to clipboard\"\n                                              }\n                                            >\n                                              <FileCopyIcon />\n                                            </Tooltip>\n                                          </IconButton>\n                                        </CopyToClipboard>\n                                      </Grid>\n                                    </div>\n                                  </Grid>\n                                  <Grid\n                                    container\n                                    direction=\"row\"\n                                    justify=\"center\"\n                                  >\n                                    <Button\n                                      variant=\"contained\"\n                                      color={\"primary\"}\n                                      fullWidth\n                                      size=\"medium\"\n                                      style={{\n                                        width: \"33%\",\n                                        marginBottom: \"8px\"\n                                      }}\n                                      onClick={this.onNewPaymentClick}\n                                      disabled={\n                                        addr === noAddr ||\n                                        this.state\n                                          .etherclearContractInstance ===\n                                          undefined\n                                      }\n                                    >\n                                      New Payment\n                                    </Button>\n                                  </Grid>\n                                  <Divider />\n                                </div>\n                              );\n                            } else {\n                              return (\n                                <Grid\n                                  container\n                                  direction=\"row\"\n                                  justify=\"space-between\"\n                                >\n                                  <div\n                                    style={{\n                                      position: \"fixed\",\n                                      bottom: \"12px\",\n                                      left: \"16px\"\n                                    }}\n                                  >\n                                    <MobileSideDrawer\n                                      ROPSTEN={ROPSTEN}\n                                      etherclearContractDefinition={\n                                        this.state.etherclearContractDefinition\n                                      }\n                                      contractDisplayName={contractDisplayName}\n                                      displayName={displayName}\n                                      addr={addr}\n                                      noAddr={noAddr}\n                                      etherclearContractInstance={\n                                        this.state.etherclearContractInstance\n                                      }\n                                      getEtherscanAddressURL={\n                                        this.getEtherscanAddressURL\n                                      }\n                                      getEtherclearContractAddress={\n                                        this.getEtherclearContractAddress\n                                      }\n                                    />\n                                  </div>\n                                  <div\n                                    style={{\n                                      position: \"fixed\",\n                                      right: \"16px\",\n                                      bottom: \"12px\"\n                                    }}\n                                  >\n                                    <Fab\n                                      className={classes.button}\n                                      color={\"primary\"}\n                                      size=\"small\"\n                                      style={{ margin: \"0px\" }}\n                                      onClick={this.onNewPaymentClick}\n                                      disabled={\n                                        addr === noAddr ||\n                                        this.state\n                                          .etherclearContractInstance ===\n                                          undefined\n                                      }\n                                    >\n                                      <AddIcon />\n                                    </Fab>\n                                  </div>\n                                </Grid>\n                              );\n                            }\n                          }}\n                        </MediaQuery>\n                        {addr === noAddr ? (\n                          <div>\n                            <p style={noCredentialsMessage}>\n                              No accounts detected.\n                            </p>\n                            <p style={{ color: \"gray\", fontSize: \"0.8em\" }}>\n                              Please{\" \"}\n                              <a href=\"https://metamask.io/\" target={\"_blank\"}>\n                                install Metamask\n                              </a>{\" \"}\n                              or use another web3 provider.\n                            </p>\n                          </div>\n                        ) : (\n                          \"\"\n                        )}\n                        {this.state.network !== \"ropsten\" ? (\n                          <div>\n                            <p style={noCredentialsMessage}>\n                              Ropsten network not detected.\n                            </p>\n                            <p style={{ color: \"gray\", fontSize: \"0.8em\" }}>\n                              Please ensure you are using the Ropsten testnet.\n                            </p>\n                          </div>\n                        ) : (\n                          \"\"\n                        )}\n                      </Grid>\n                    </div>\n                    <MediaQuery query={`(min-width: ${mobileBreakpoint})`}>\n                      {matches => {\n                        if (matches) {\n                          return <Divider />;\n                        } else {\n                          return \"\";\n                        }\n                      }}\n                    </MediaQuery>\n                    {/** App Events Sections */}\n                    <Route\n                      path=\"/app/\"\n                      exact\n                      render={() => (\n                        <div>\n                          <div style={{ width: headerWidth, margin: \"auto\" }}>\n                            <h3\n                              style={{\n                                fontSize: \"2em\",\n                                textAlign: \"center\",\n                                fontWeight: \"500\",\n                                marginBottom: \"0px\"\n                              }}\n                            >\n                              App Events\n                            </h3>\n                            <Divider />\n                          </div>\n                          <br />\n                          {Object.keys(this.state.events).length === 0 ? (\n                            <MediaQuery\n                              query={`min-width: ${mobileBreakpoint}px`}\n                            >\n                              {matches => {\n                                if (matches) {\n                                  return (\n                                    <div\n                                      style={{\n                                        width: \"40%\",\n                                        margin: \"auto\",\n                                        marginTop: \"80px\"\n                                      }}\n                                    >\n                                      <h3\n                                        style={{\n                                          fontWeight: \"normal\",\n                                          fontSize: \"1.5em\",\n                                          textDecoration: \"underline\",\n                                          textAlign: \"center\",\n                                          marginBottom: \"2px\",\n                                          color: \"gray\"\n                                        }}\n                                      >\n                                        No app events to display.\n                                      </h3>\n                                      <p\n                                        style={{\n                                          textAlign: \"center\",\n                                          color: \"gray\",\n                                          width: \"80%\",\n                                          margin: \"auto\"\n                                        }}\n                                      >\n                                        App events notify you about the status\n                                        of actions (e.g. creating and cancelling\n                                        payments). App events are only kept for\n                                        the current session, and will not\n                                        persist if you refresh the page.\n                                      </p>\n                                    </div>\n                                  );\n                                } else {\n                                  return (\n                                    <div\n                                      style={{\n                                        width: \"90%\",\n                                        margin: \"auto\",\n                                        marginTop: \"0px\"\n                                      }}\n                                    >\n                                      <h3\n                                        style={{\n                                          fontSize: \"1em\",\n                                          color: \"gray\",\n                                          textAlign: \"center\",\n                                          fontWeight: \"500\",\n                                          textDecoration: \"underline\"\n                                        }}\n                                      >\n                                        No app events to display.\n                                      </h3>\n                                      <p\n                                        style={{\n                                          textAlign: \"center\",\n                                          color: \"gray\",\n                                          width: \"80%\",\n                                          margin: \"auto\"\n                                        }}\n                                      >\n                                        App events notify you about the status\n                                        of actions (e.g. creating and cancelling\n                                        payments). App events are only kept for\n                                        the current session, and will not\n                                        persist if you refresh the page.\n                                      </p>\n                                    </div>\n                                  );\n                                }\n                              }}\n                            </MediaQuery>\n                          ) : (\n                            <EventExpansionPanel\n                              events={this.state.events}\n                              clearEvent={this.clearEvent}\n                            />\n                          )}\n                        </div>\n                      )}\n                    />\n\n                    {/** New Payment Section */}\n                    <Route\n                      path=\"/app/newPayment\"\n                      exact\n                      render={() => (\n                        <NewPayment\n                          toggleNew={this.toggleNew}\n                          newPayment={this.state.newPayment}\n                          updateNewPayment={this.updateNewPayment}\n                          updateNewPaymentTime={this.updateNewPaymentTime}\n                          createPayment={this.createPayment}\n                          updateTokenBalance={this.updateTokenBalance}\n                          etherclearContractInstance={\n                            this.state.etherclearContractInstance\n                          }\n                          resolveAddrToENSName={this.resolveAddrToENSName}\n                          ensUtil={this.getEnsUtil()}\n                          getTokenMap={this.getTokenMap}\n                          network={this.state.network}\n                          calculateFees={this.calculateFees}\n                          calculateSendAmount={this.calculateSendAmount}\n                        />\n                      )}\n                    />\n\n                    {/** Settings Section */}\n                    <Route\n                      path=\"/app/settings\"\n                      exact\n                      render={() => (\n                        <Settings\n                          contractVersions={this.state.contractVersions}\n                          registerContractInstance={\n                            this.registerContractInstance\n                          }\n                          network={this.state.network}\n                          getEtherclearContractAddress={\n                            this.getEtherclearContractAddress\n                          }\n                        />\n                      )}\n                    />\n\n                    {/** Payments Index Section */}\n                    <Route\n                      path=\"/app/payments\"\n                      exact\n                      render={() => (\n                        <div style={{ width: \"100%\" }}>\n                          <PaymentsIndex\n                            createPayment={this.createPayment}\n                            updateTokenBalance={this.updateTokenBalance}\n                            updateDaysInput={this.updateDaysInput}\n                            daysInput={this.state.daysInput}\n                            etherclearContractInstance={\n                              this.state.etherclearContractInstance\n                            }\n                            retrieveFunds={this.retrieveFunds}\n                            retrieveFundsFeeless={this.retrieveFundsFeeless}\n                            cancelPayment={this.cancelPayment}\n                            getPayments={this.getPayments}\n                            getPaymentEvents={this.getPaymentEvents}\n                            allPayments={this.state.allPayments}\n                            openPayments={this.state.openPayments}\n                            loadingPayments={this.state.loadingPayments}\n                            closedPayments={this.state.closedPayments}\n                            allAccounts={this.state.accounts}\n                            menuOpen={this.state.menuOpen}\n                            toggleMenuOpen={this.toggleMenuOpen}\n                            checkRetrieveSignature={this.checkRetrieveSignature}\n                            events={this.state.events}\n                            clearEvent={this.clearEvent}\n                            getEtherscanTxnURL={this.getEtherscanTxnURL}\n                            getTokenMap={this.getTokenMap}\n                            tokenAddrToSymbol={this.tokenAddrToSymbol}\n                          />\n                        </div>\n                      )}\n                    />\n\n                    {/** Payment Details View (empty if we have not yet fetched the etherclear contract instance)*/}\n                    <Route\n                      path=\"/app/payment/:id\"\n                      exact\n                      render={({ location }) =>\n                        addr === noAddr ||\n                        this.state.etherclearContractInstance === undefined ? (\n                          \"\"\n                        ) : (\n                          <PaymentDetails\n                            payment={location.state.payment}\n                            toggleWithdraw={this.toggleMenuOpen(\"closedTx\")(\n                              \"withdraw\"\n                            )}\n                            toggleCancel={this.toggleMenuOpen(\"closedTx\")(\n                              \"cancel\"\n                            )}\n                            retrieveFunds={this.retrieveFunds}\n                            retrieveFundsFeeless={this.retrieveFundsFeeless}\n                            cancelPayment={this.cancelPayment}\n                            cancelPaymentFeeless={this.cancelPaymentFeeless}\n                            allAccounts={this.state.accounts}\n                            getEtherscanTxnURL={this.getEtherscanTxnURL}\n                            getCachedAddrForENSName={\n                              this.getCachedAddrForENSName\n                            }\n                            getTokenMap={this.getTokenMap}\n                            tokenAddrToSymbol={this.tokenAddrToSymbol}\n                          />\n                        )\n                      }\n                    />\n                  </div>\n                </div>\n              </div>\n            </Grid>\n          </MuiThemeProvider>\n        </div>\n      </ReactBreakpoints>\n    );\n  }\n\n  // TODO: Delete.\n  checkRetrieveSignature = (msg, sig) => {\n    const signature = sig.substring(2);\n    const sigR = \"0x\" + signature.substring(0, 64);\n    const sigS = \"0x\" + signature.substring(64, 128);\n    const sigV = parseInt(signature.substring(128, 130), 16);\n\n    console.log(sigR);\n    console.log(sigS);\n    console.log(sigV);\n    console.log(msg.txID);\n    console.log(msg.sender);\n    console.log(msg.recipient);\n    console.log(msg.passphrase);\n\n    this.state.etherclearContractInstance\n      .checkRetrieveSignature(\n        msg.txID,\n        msg.sender,\n        msg.recipient,\n        msg.passphrase,\n        sigR,\n        sigS,\n        sigV,\n        {\n          from: this.state.accounts[0],\n          gas: GAS\n        }\n      )\n      .then(result => {\n        console.log(result);\n      })\n      .catch(error => {\n        console.log(error);\n      });\n  };\n\n  toggleMenuOpen = menuName => name => index => () => {\n    console.log(this.state.menuOpen);\n    let copy = this.state.menuOpen;\n    copy[menuName][name] = index;\n    this.setState({ menuOpen: copy });\n  };\n\n  updateEvents = (event, key) => {\n    let eventsCopy = this.state.events;\n    eventsCopy[key] = event;\n    this.setState({ events: eventsCopy });\n  };\n\n  // Convenience functions to update events.\n  // The way these are used currently, the functions will persist\n  // new events on an updated, even after the user clears an event.\n\n  updateEvent = (event, key, line, statusText) => {\n    //let event = this.state.events[key];\n    event.statusText = statusText;\n    event.msgLines.push(line);\n    this.updateEvents(event, key);\n  };\n\n  updateEventForSuccess = (event, key, line) => {\n    //let event = this.state.events[key];\n    event.statusText = \"Success\";\n    event.msgLines.push(line);\n    event.loading = false;\n    this.updateEvents(event, key);\n  };\n\n  updateEventForError = (event, key, line) => {\n    //let event = this.state.events[key];\n    event.statusText = \"Error\";\n    event.msgLines.push(line);\n    event.loading = false;\n    this.updateEvents(event, key);\n  };\n\n  clearEvent = ts => {\n    let eventsCopy = this.state.events;\n    delete eventsCopy[ts.toString()];\n    this.setState({ events: eventsCopy });\n  };\n\n  // Returns { paymentFee, baseFee }\n  calculateFees = sendAmount => {\n    // TODO: don't use a fallback here\n    let baseFee =\n      this.state.baseFeeWei === undefined\n        ? toBN(window.web3.utils.toWei(App.baseFeeEth, \"ether\"))\n        : toBN(this.state.baseFeeWei);\n    // TODO: are there issues with precision here?\n    let paymentFee =\n      this.state.paymentFeeWei === undefined\n        ? toBN(parseInt(sendAmount * App.paymentFeePercent))\n        : toBN(\n            parseInt(\n              toBN(this.state.paymentFeeWei)\n                .div(toBN(10).pow(18))\n                .times(sendAmount)\n            )\n          );\n\n    return { paymentFee: paymentFee, baseFee: baseFee };\n  };\n\n  calculateSendAmount = (sendEther, amount, denom, token) => {\n    let sendAmount;\n    // TODO: not the best way to catch errors.\n    if (sendEther) {\n      let num = toBN(amount);\n\n      try {\n        sendAmount = toBN(window.web3.utils.toWei(num.toFixed(), denom));\n      } catch (e) {\n        sendAmount = toBN(0);\n      }\n    } else {\n      let tokenInfo = this.getTokenMap()[token];\n\n      try {\n        sendAmount = toBN(amount).times(toBN(10).pow(tokenInfo.decimals));\n      } catch (e) {\n        sendAmount = toBN(0);\n      }\n    }\n    return sendAmount;\n  };\n\n  createPayment = async (\n    amount,\n    recipient,\n    holdTime,\n    codeHash,\n    denom,\n    sendEther\n  ) => {\n    if (!sendEther) {\n      return this.createTokenPayment(\n        amount,\n        recipient,\n        holdTime,\n        codeHash,\n        denom\n      );\n    }\n\n    let sendAmount = this.calculateSendAmount(sendEther, amount, denom, null);\n\n    let { paymentFee, baseFee } = this.calculateFees(sendAmount);\n\n    let sendValue = sendAmount.plus(paymentFee).plus(baseFee);\n\n    // Create event\n    // TODO: pass in the newPayment to display info from it\n    let event = {\n      ts: Date.now(),\n      name: \"Create ETH payment\",\n      msgLines: [\"Created the raw transaction.\"],\n      loading: true,\n      statusText: \"Waiting for user to sign.\"\n    };\n\n    this.updateEvents(event, event.ts);\n\n    let gasEstimate = await this.state.etherclearContractInstance.createPayment.estimateGas(\n      sendAmount.toString(10),\n      recipient,\n      holdTime,\n      codeHash,\n      {\n        from: this.state.accounts[0],\n        gas: GAS,\n        value: sendValue.toString(10)\n      }\n    );\n\n    this.state.etherclearContractInstance\n      .createPayment(\n        // TODO: Is using toNumber safe?\n        sendAmount.toString(10),\n        recipient,\n        holdTime,\n        codeHash,\n        {\n          from: this.state.accounts[0],\n          gas: parseInt(gasEstimate * GAS_ESTIMATE_MULTIPLIER),\n          gasPrice: window.web3.utils.toWei(GAS_PRICE_GWEI, \"gwei\"),\n          value: sendValue.toString(10)\n        }\n      )\n      .on(\"transactionHash\", hash => {\n        this.updateEvent(\n          event,\n          event.ts,\n          this.displayHashWithLinkMsg(\"Received transaction hash:\", hash),\n          \"Waiting for transaction result\"\n        );\n      })\n      .then(result => {\n        console.log(\"Ether payment create success: \");\n        console.log(result);\n        this.updateEventForSuccess(\n          event,\n          event.ts,\n          \"Ether payment created successfully.\"\n        );\n        // TODO: search from the most recent timestamp and append. Maybe \"merge\"?\n        this.getPaymentEvents();\n      })\n      .catch(err => {\n        console.log(err);\n        this.updateEventForError(event, event.ts, err.toString());\n      });\n  };\n\n  // TODO: this only works on Ropsten, of course.\n  // mainnetTokenData has the same format.\n  static ropstenTokenMap = {\n    BOKKY: {\n      name: \"BOKKY\",\n      // We need the toLowerCase() because this is how the mainnet\n      // token map addresses are filled in.\n      addr: \"0x583cbBb8a8443B38aBcC0c956beCe47340ea1367\".toLowerCase(),\n      decimals: \"18\"\n    }\n  };\n\n  // TODO: may want to merge tokens to begin with?\n  getTokenMap = () => {\n    if (this.state.network === \"main\") {\n      return mainnetTokenData;\n    } else if (this.state.network === \"ropsten\") {\n      return App.ropstenTokenMap;\n    } else {\n      // Just merge all the tokens we have\n      return { ...mainnetTokenData, ...App.ropstenTokenMap };\n    }\n  };\n\n  tokenAddrToSymbol = () => {\n    let tokenMap = this.getTokenMap();\n    let result = {};\n    for (let k in tokenMap) {\n      result[tokenMap[k].addr] = k;\n    }\n    // Add on ETH as well, since it isn't included in the token map\n    result[\"0x0000000000000000000000000000000000000000\"] = \"ETH\";\n    return result;\n  };\n\n  // TODO: these are fallback values and should never be used.\n  static paymentFeePercent = 0.005;\n  static baseFeeEth = \"0.001\";\n\n  static networkNameToID = { ropsten: \"3\", main: \"1\" };\n  static networkIDToName = { \"3\": \"ropsten\", \"1\": \"main\" };\n\n  // TODO: Think about better ways to organize the\n  // ERC-20 contract creation for multiple tokens.\n  // The balance could be saved for each token that is used,\n  // so that the old balance is displayed while the new\n  // one is being fetched.\n\n  // TODO: does this need events as well?\n  // TODO: this gets called when we're sending ETH as well\n  updateTokenBalance = async name => {\n    let tokenMap = this.getTokenMap();\n    if (tokenMap === undefined) {\n      return;\n    }\n    let tokenInfo = tokenMap[name];\n\n    // TODO: this should probably be accounted for beforehand.\n    if (this.state.accounts[0] === undefined) {\n      return 0;\n    }\n\n    if (name === \"ETH\") {\n      return window.web3.eth.getBalance(this.state.accounts[0]);\n    }\n\n    let tokenContractInstance;\n    let erc20 = contract(IERC20ContractDefinition);\n    // TODO: This depends on whether the provider is metamask.\n    if (window.ethereum !== undefined) {\n      erc20.setProvider(window.ethereum);\n    } else if (window.web3.currentProvider !== undefined) {\n      erc20.setProvider(window.web3.currentProvider);\n    } else {\n      console.log(\n        \"Could not obtain provider to initialize ERC-20 contract instance\"\n      );\n    }\n\n    return await erc20\n      .at(tokenInfo.addr)\n      .then(result => {\n        console.log(\"Got token contract result\");\n        tokenContractInstance = result;\n        // Get balance\n        return result.balanceOf(this.state.accounts[0], {\n          from: this.state.accounts[0],\n          gas: GAS\n        });\n      })\n      .then(balance => {\n        console.log(balance.toString());\n        return balance.toString();\n      })\n      .catch(error => {\n        console.log(error);\n      });\n  };\n\n  // In this case denom is the token symbol.\n  // Assumes we have a valid network and contract instance.\n  createTokenPayment = async (amount, recipient, holdTime, codeHash, denom) => {\n    let tokenInfo = this.getTokenMap()[denom];\n    // Currently only supports Bokky Poo Bah test tokens\n    // TODO: Reuse the contract instance instead of fetching it\n    // each time.\n    let tokenContractInstance;\n\n    let sendAmount = this.calculateSendAmount(false, amount, null, denom);\n\n    let { paymentFee, baseFee } = this.calculateFees(sendAmount);\n\n    // We need to send the original amount to the contract for it to calculate the\n    // fee with, but request approval to transfer the amount with the fee.\n    let amountWithFee = sendAmount.plus(paymentFee);\n\n    // TODO: don't need to do this twice (already do it to get the balance).\n    let erc20 = contract(IERC20ContractDefinition);\n    // TODO: Use of window.ethereum depends on whether the provider is metamask.\n    // Maybe just check if window.ethereum is provided?\n    if (window.ethereum !== undefined) {\n      erc20.setProvider(window.ethereum);\n    } else if (window.web3.currentProvider !== undefined) {\n      erc20.setProvider(window.web3.currentProvider);\n    } else {\n      console.log(\n        \"Could not obtain provider to initialize ERC-20 contract instance\"\n      );\n    }\n\n    // TODO: pass in the newPayment to display info from it\n    let event = {\n      ts: Date.now(),\n      name: \"Create \" + denom + \" payment\",\n      msgLines: [\"Created the raw transaction.\"],\n      loading: true,\n      statusText: \"Waiting for user to sign first transaction\"\n    };\n\n    this.updateEvents(event, event.ts);\n    /*\n        erc20\n          .at(tokenInfo.addr)\n          .then(result => {\n            console.log(\"Got token contract result\");\n            tokenContractInstance = result;\n            */\n    // Make approval\n    // TODO: implement batch transactions once the issue\n    // with ordering is resolved, otherwise the user has to\n    // click through to the approve transaction first and could get the order\n    // mixed up.\n    // https://github.com/MetaMask/metamask-extension/issues/5852\n    /*\n                  let batch = new window.web3.BatchRequest();\n                  batch.add(this.state.etherclearContractInstance.createTokenPayment(\n                      tokenInfo.addr,\n                      sendAmount.toString(10),\n                      recipient,\n                      holdTime,\n                      codeHash,\n                      {\n                          from: this.state.accounts[0],\n                          gas: GAS,\n                          value: baseFee.toString(10),\n                      }));\n                  batch.add(result.approve(this.state.etherclearContractDefinition.networks[ROPSTEN].address, sendAmount.toString(10),\n                      {\n                          from: this.state.accounts[0],\n                          gas: GAS,\n                      }));\n                  return batch.execute();\n                  */\n\n    let result = await erc20.at(tokenInfo.addr);\n\n    let gasEstimate = await result.approve.estimateGas(\n      this.getEtherclearContractAddress(),\n      amountWithFee.toString(10),\n      {\n        from: this.state.accounts[0],\n        gas: GAS\n      }\n    );\n\n    result\n      .approve(\n        this.getEtherclearContractAddress(),\n\n        amountWithFee.toString(10),\n        {\n          from: this.state.accounts[0],\n          gas: parseInt(\n            parseInt(gasEstimate) * GAS_ESTIMATE_MULTIPLIER\n          ).toString(),\n          gasPrice: window.web3.utils.toWei(GAS_PRICE_GWEI, \"gwei\")\n        }\n      )\n      .on(\"transactionHash\", async hash => {\n        this.updateEvent(\n          event,\n          event.ts,\n          this.displayHashWithLinkMsg(\"Received transaction hash:\", hash),\n          \"Waiting for user to sign second transaction\"\n        );\n\n        // TODO: Either batch these or refactor to make\n        // the calls cleaner.\n\n        // TODO: have a way to skip the approval in case the user wants\n        //to retry just the contract interaction.\n        try {\n          gasEstimate = await this.state.etherclearContractInstance.createTokenPayment.estimateGas(\n            tokenInfo.addr,\n            sendAmount.toString(10),\n            recipient,\n            holdTime,\n            codeHash,\n            {\n              from: this.state.accounts[0],\n              gas: GAS,\n              value: baseFee.toString(10)\n            }\n          );\n        } catch (error) {\n          this.updateEventForError(event, event.ts, error.toString());\n          gasEstimate = GAS;\n        }\n\n        this.state.etherclearContractInstance\n          .createTokenPayment(\n            tokenInfo.addr,\n            sendAmount.toString(10),\n            recipient,\n            holdTime,\n            codeHash,\n            {\n              from: this.state.accounts[0],\n              gas: parseInt(\n                parseInt(gasEstimate) * GAS_ESTIMATE_MULTIPLIER\n              ).toString(),\n              gasPrice: window.web3.utils.toWei(GAS_PRICE_GWEI, \"gwei\"),\n              value: baseFee.toString(10)\n            }\n          )\n          .on(\"transactionHash\", hash => {\n            this.updateEvent(\n              event,\n              event.ts,\n              this.displayHashWithLinkMsg(\"Received transaction hash:\", hash),\n              \"Waiting for transaction result\"\n            );\n          })\n          .then(result => {\n            this.updateEventForSuccess(\n              event,\n              event.ts,\n              \"Token payment created successfully.\"\n            );\n            this.getPaymentEvents();\n          })\n          .catch(error => {\n            console.log(error);\n            this.updateEventForError(event, event.ts, error.toString());\n          });\n      })\n      .then(approval => {\n        console.log(\"Got token transfer approval\");\n        this.updateEvent(\n          event,\n          event.ts,\n          \"Got token transfer approval.\",\n          \"Approval complete\"\n        );\n      })\n      .catch(error => {\n        console.log(error);\n        this.updateEventForError(event, event.ts, error.toString());\n      });\n  };\n\n  retrieveFunds = async (txnId, code) => {\n    let event = {\n      ts: Date.now(),\n      name: \"Retrieve funds\",\n      msgLines: [\"Created the raw transaction.\"],\n      loading: true,\n      statusText: \"Waiting for user to sign\"\n    };\n\n    this.updateEvents(event, event.ts);\n\n    let gasEstimate = await this.state.etherclearContractInstance.retrieveFundsAsRecipient.estimateGas(\n      txnId,\n      code,\n      {\n        from: this.state.accounts[0],\n        gas: GAS\n      }\n    );\n\n    this.state.etherclearContractInstance\n      .retrieveFundsAsRecipient(txnId, code, {\n        from: this.state.accounts[0],\n        gas: parseInt(gasEstimate * GAS_ESTIMATE_MULTIPLIER),\n        gasPrice: window.web3.utils.toWei(GAS_PRICE_GWEI, \"gwei\")\n      })\n      .on(\"transactionHash\", hash => {\n        this.updateEvent(\n          event,\n          event.ts,\n          this.displayHashWithLinkMsg(\"Received transaction hash:\", hash),\n          \"Waiting for transaction result\"\n        );\n      })\n      .then(result => {\n        console.log(\"Retrieve funds success: \");\n        console.log(result);\n        this.updateEventForSuccess(\n          event,\n          event.ts,\n          \"Funds successfully retrieved\"\n        );\n\n        // Refresh payments.\n        // TODO: search from the most recent timestamp and append.\n        this.getPaymentEvents();\n      })\n      .catch(error => {\n        this.updateEventForError(event, event.ts, error.toString());\n      });\n  };\n\n  retrieveFundsFeeless = async (txnId, code, sender) => {\n    await this.completePayment(txnId, code, sender, 1);\n  };\n\n  cancelPaymentFeeless = async txnId => {\n    let sender = this.state.accounts[0];\n    // The code (passphrase) doesn't matter here, since it's\n    // not checked in the contract.\n    await this.completePayment(txnId, \"N/A\", sender, 0);\n  };\n\n  completePayment = async (txnId, code, sender, requestType) => {\n    var sigUtil = require(\"eth-sig-util\");\n    var ethUtil = require(\"ethereumjs-util\");\n\n    // Taken from example at https://github.com/danfinlay/js-eth-personal-sign-examples\n    let recipient = window.web3.utils.toChecksumAddress(this.state.accounts[0]);\n    console.log(\"recipient is: \" + recipient);\n\n    let eventName =\n      requestType === 0 ? \"Cancel funds (feeless)\" : \"Retrieve funds (feeless)\";\n\n    let event = {\n      ts: Date.now(),\n      name: eventName,\n      msgLines: [\"Created the raw signed message.\"],\n      loading: true,\n      statusText: \"Waiting for user to sign\"\n    };\n\n    // TODO: here we assume that this.state.network is defined,\n    // and it is either main or ropsten.\n    let chainId = App.networkNameToID[this.state.network];\n\n    let msgParams = JSON.stringify({\n      types: {\n        EIP712Domain: [\n          { name: \"name\", type: \"string\" },\n          { name: \"version\", type: \"string\" },\n          { name: \"chainId\", type: \"uint256\" },\n          { name: \"verifyingContract\", type: \"address\" },\n          { name: \"salt\", type: \"bytes32\" }\n        ],\n        CompletePaymentRequest: [\n          { name: \"txnId\", type: \"uint256\" },\n          { name: \"sender\", type: \"address\" },\n          { name: \"recipient\", type: \"address\" },\n          { name: \"passphrase\", type: \"string\" },\n          { name: \"requestType\", type: \"uint256\" }\n        ]\n      },\n      primaryType: \"CompletePaymentRequest\",\n      domain: {\n        name: \"Etherclear\",\n        version: \"1\",\n        chainId: chainId,\n        verifyingContract: \"0x1C56346CD2A2Bf3202F771f50d3D14a367B48070\",\n        salt:\n          \"0xf2d857f4a3edcb9b78b4d503bfe733db1e3f6cdc2b7971ee739626c97e86a558\"\n      },\n      message: {\n        txnId: txnId,\n        sender: sender,\n        recipient: recipient,\n        passphrase: code,\n        // CompletePaymentRequestType.CANCEL (0)\n        // CompletePaymentRequestType.RETRIEVE (1)\n        requestType: requestType\n      }\n    });\n\n    console.log(\n      \"CLICKED, SENDING PERSONAL SIGN REQ\",\n      \"from\",\n      recipient,\n      msgParams\n    );\n\n    var params = [recipient, msgParams];\n    console.dir(params);\n    var method = \"eth_signTypedData_v3\";\n\n    this.updateEvents(event, event.ts);\n\n    window.web3.currentProvider.sendAsync(\n      {\n        method,\n        params,\n        recipient\n      },\n      (err, result) => {\n        if (err) return console.dir(err);\n        if (result.error) {\n          this.updateEventForError(\n            event,\n            event.ts,\n            JSON.stringify(result.error)\n          );\n        }\n        if (result.error) return console.error(\"ERROR\", result);\n        console.log(\"TYPED SIGNED:\" + JSON.stringify(result.result));\n\n        const recovered = sigUtil.recoverTypedSignature({\n          data: JSON.parse(msgParams),\n          sig: result.result\n        });\n\n        if (\n          ethUtil.toChecksumAddress(recovered) ===\n          ethUtil.toChecksumAddress(recipient)\n        ) {\n          let msgLine =\n            \"Successfully ecRecovered signer as \" +\n            recipient +\n            \". Submitting to the relayer service.\";\n          this.updateEvent(event, event.ts, msgLine, \"Submitting to relayer\");\n        } else {\n          let errMsg =\n            \"Failed to verify signer when comparing \" +\n            result +\n            \" to \" +\n            recipient;\n          this.updateEventForError(event, event.ts, errMsg);\n\n          this.updateEvents(event, event.ts);\n        }\n\n        let relayerEndpoint =\n          getEndpointForVersion(this.state.thisContractVersion) + \"tx\";\n        console.log(\"Using backend relayer endpoint: \" + relayerEndpoint);\n\n        fetch(relayerEndpoint, {\n          method: \"POST\",\n          mode: \"cors\",\n          headers: {\n            \"Content-Type\": \"application/json; charset=utf-8\",\n            // TODO: this needs to be more restrictive.\n            \"Access-Control-Allow-Origin\": \"*\"\n          },\n          body: JSON.stringify({\n            msg: msgParams,\n            from: recipient,\n            sig: result.result,\n            network: this.state.network,\n            contractAddress: this.getEtherclearContractAddress()\n          })\n        })\n          .then(response => {\n            let json = response.json();\n            this.updateEvent(\n              event,\n              event.ts,\n              \"Got server response.\",\n              \"Processing response\"\n            );\n            return json;\n          })\n          .then(async json => {\n            console.log(\"Parsed response JSON: \", JSON.stringify(json));\n            if (json.err !== undefined) {\n              this.updateEventForError(\n                event,\n                event.ts,\n                JSON.stringify(json.err)\n              );\n            } else if (json.res !== undefined) {\n              let receipt = null;\n\n              this.updateEvent(\n                event,\n                event.ts,\n                this.displayHashWithLinkMsg(\n                  \"Server submitted transaction. Polling the chain for transaction:\",\n                  json.res\n                ),\n                \"Waiting for transaction result\"\n              );\n\n              while (receipt === null) {\n                await sleep(5000);\n                receipt = await window.web3.eth.getTransactionReceipt(json.res);\n                console.log(\"Current receipt is: \" + receipt);\n                console.log(\"Checking for transaction receipt...\");\n              }\n              if (receipt.status === false) {\n                console.log(\"Transaction failed.\");\n                this.updateEventForError(\n                  event,\n                  event.ts,\n                  \"Transaction failed.\"\n                );\n\n                this.updateEvents(event, event.ts);\n              } else if (receipt.status === true) {\n                console.log(\"Transaction succeeded!\");\n                this.updateEventForSuccess(\n                  event,\n                  event.ts,\n                  \"Transaction succeeded\"\n                );\n\n                this.getPaymentEvents();\n              }\n            } else {\n              this.updateEventForError(\n                event,\n                event.ts,\n                \"No result was set in the response.\"\n              );\n            }\n          })\n          .catch(ex => {\n            console.log(\"parsing failed\", ex);\n            this.updateEventForError(\n              event,\n              event.ts,\n              \"Parsing response failed: \" + ex\n            );\n          });\n\n        // TODO: remove once signature debugging is complete.\n        //let sig = result.result;\n        //let msg = JSON.parse(msgParams).message;\n        //this.props.checkRetrieveSignature(msg, sig);\n      }\n    );\n  };\n\n  cancelPayment = async txnId => {\n    let event = {\n      ts: Date.now(),\n      name: \"Cancel payment\",\n      msgLines: [\"Created the raw transaction.\"],\n      loading: true,\n      statusText: \"Waiting for user to sign\"\n    };\n\n    this.updateEvents(event, event.ts);\n\n    let gasEstimate = await this.state.etherclearContractInstance.cancelPaymentAsSender.estimateGas(\n      txnId,\n      {\n        from: this.state.accounts[0],\n        gas: GAS\n      }\n    );\n\n    this.state.etherclearContractInstance\n      .cancelPaymentAsSender(txnId, {\n        from: this.state.accounts[0],\n        gas: parseInt(gasEstimate * GAS_ESTIMATE_MULTIPLIER),\n        gasPrice: window.web3.utils.toWei(GAS_PRICE_GWEI, \"gwei\")\n      })\n      .on(\"transactionHash\", hash => {\n        this.updateEvent(\n          event,\n\n          event.ts,\n          this.displayHashWithLinkMsg(\"Received transaction hash:\", hash),\n          \"Waiting for transaction result\"\n        );\n      })\n      .then(result => {\n        console.log(\"Cancel payment success: \");\n        console.log(result);\n        this.updateEventForSuccess(event, event.ts, \"Cancel payment success.\");\n        // Refresh payments.\n        // TODO: search from the most recent timestamp and append.\n        this.getPaymentEvents();\n      })\n      .catch(err => {\n        console.log(err);\n        this.updateEventForError(event, event.ts, err.toString());\n      });\n  };\n\n  // TODO: try/catch and throw an error on bad input.\n  precise = (x, num) => {\n    return Number.parseFloat(x).toPrecision(num);\n  };\n\n  getBlocksPerDay = async () => {\n    let currBlock = await this.getInfuraWeb3().eth.getBlock(\"latest\");\n    // Average the past 50000 blocks\n    // TODO: this number is arbitrary.\n    let window = 50000;\n    let fromBlock = await this.getInfuraWeb3().eth.getBlock(\n      currBlock.number - window\n    );\n    let diffSecs = currBlock.timestamp - fromBlock.timestamp;\n\n    let numDays = diffSecs / (60 * 60 * 24);\n    return parseInt(window / numDays);\n  };\n\n  getPaymentEvents = async () => {\n    // TODO: check valid daysInput here as well?\n    return this.getRecentPaymentEvents(parseInt(this.state.daysInput));\n  };\n\n  latestTsFirst = (a, b) => {\n    if (a.paymentOpenTime > b.paymentOpenTime) return -1;\n    if (b.paymentOpenTime > a.paymentOpenTime) return 1;\n\n    return 0;\n  };\n\n  // TODO: should there be app events for this to let the user know these are loading?\n  // numDays is the number of days (approximately) that\n  // in the past to filter for payments.\n  getRecentPaymentEvents = async numDays => {\n    // txnId -> txn object.\n    let paymentMap = {};\n\n    // TODO: This may slow things down. Also FYI, it has side effects\n    // that change state.\n    let currBlock = await this.getCurrTimestamp();\n    let fromBlock;\n\n    if (numDays === \"max\") {\n      fromBlock = 0;\n    } else {\n      let perDay = await this.getBlocksPerDay();\n      // TODO: will need to validate numdays beforehand\n      let numBlocks = parseInt(numDays) * perDay;\n      if (numBlocks > currBlock.number) {\n        fromBlock = 0;\n      } else {\n        fromBlock = currBlock.number - numBlocks;\n      }\n    }\n\n    /*\n          1. Get seconds per block.\n          2. numBlocks = (days * 24 * 60 * 60) / (secsPerBlock)\n          3. Use currBlock.number - numBlocks as start.\n           */\n\n    // TODO: This is a little hacky. We want to reset the menu indices every\n    // time the payment list changes, but this may not be the place to\n    // do it if there are other places we're updating that list.\n\n    // TODO: fix the filters here. This is a hack, you can't read all of the events.\n    this.setState({ loadingPayments: true });\n\n    this.state.etherclearContractInstance\n      .getPastEvents(\"allEvents\", {\n        // _from: this.state.allAccounts[0].Address,\n        filter: {\n          sender: this.state.accounts[0],\n          recipient: this.state.accounts[0]\n        },\n        fromBlock: fromBlock,\n        toBlock: \"latest\"\n      })\n      .then(async result => {\n        // TODO: hack, we're relying on the fact that\n        // there are only two types of events to merge\n        // these without caring about the order.\n        for (let i = 0; i < result.length; i++) {\n          let entry = result[i];\n          let txn = entry.returnValues;\n          let type = entry.event;\n\n          if (\n            !(\n              this.state.accounts[0] === txn.recipient ||\n              this.state.accounts[0] === txn.sender\n            )\n          ) {\n            continue;\n          }\n\n          let recipientName = txn.recipient;\n          let senderName = txn.sender;\n\n          // TODO: someone could pass a timestamp that's greater than 53 bits. You should just deal with timestamps as BNs and convert on display.\n          // TODO: we don't assume any order here, which may make things unnecessarily complicated.\n          if (type === \"PaymentOpened\") {\n            if (txn.txnId in paymentMap) {\n              // TODO: we don't need to do anything here\n              // now that the PaymentClosed event\n              // contains all necessary payment information\n              let copy = paymentMap[txn.txnId];\n              copy.holdTime = parseInt(toBN(txn.holdTime).toFixed(10));\n              copy.paymentOpenTime = parseInt(toBN(txn.openTime).toFixed());\n              copy.token = txn.token;\n              copy.sendAmount = parseInt(toBN(txn.sendAmount).toFixed());\n              copy.sender = senderName;\n              copy.recipient = recipientName;\n              copy.codeHash = txn.codeHash;\n              copy.openHash = entry.transactionHash;\n              paymentMap[txn.txnId] = copy;\n            } else {\n              let payment = {\n                paymentId: txn.txnId,\n                holdTime: parseInt(toBN(txn.holdTime).toFixed()),\n                paymentOpenTime: parseInt(toBN(txn.openTime).toFixed(10)),\n                //paymentCloseTime: txn.closeTime.toNumber(),\n                token: txn.token,\n                sendAmount: toBN(txn.sendAmount).toFixed(),\n                sender: senderName,\n                recipient: recipientName,\n                codeHash: txn.codeHash,\n                openHash: entry.transactionHash,\n                // PaymentState.OPEN\n                state: 0\n              };\n              paymentMap[txn.txnId] = payment;\n            }\n          } else if (type === \"PaymentClosed\") {\n            if (txn.txnId in paymentMap) {\n              // Just take the fields we need.\n              let copy = paymentMap[txn.txnId];\n              copy.state = txn.state;\n              copy.paymentCloseTime = txn.closeTime;\n              copy.closeHash = entry.transactionHash;\n              paymentMap[txn.txnId] = copy;\n            } else {\n              let payment = {\n                paymentId: txn.txnId,\n                holdTime: txn.holdTime.toNumber(),\n                paymentOpenTime: txn.openTime.toNumber(),\n                paymentCloseTime: parseInt(toBN(txn.closeTime).toFixed()),\n                token: txn.token,\n                sendAmount: txn.sendAmount.toNumber(),\n                sender: senderName,\n                recipient: recipientName,\n                codeHash: txn.codeHash,\n                closeHash: entry.transactionHash,\n                state: toBN(txn.state).toNumber()\n              };\n              paymentMap[txn.txnId] = payment;\n            }\n          }\n        }\n        let allPayments = Object.keys(paymentMap).map(function(key) {\n          return paymentMap[key];\n        });\n\n        // TODO: this is replicated in PaymentsIndex.filterPayments and could be cleaned up\n        // Sort and extract closed/ open payments\n        let sortedPayments = allPayments.sort(this.latestTsFirst);\n        let openPayments = [];\n        let closedPayments = [];\n\n        // TODO: should I be making a copy here?\n        for (let i = 0; i < sortedPayments.length; i++) {\n          if (sortedPayments[i].state === 0) {\n            openPayments.push(sortedPayments[i]);\n          } else {\n            closedPayments.push(sortedPayments[i]);\n          }\n        }\n\n        this.setState({\n          allPayments: sortedPayments,\n          openPayments,\n          closedPayments,\n          loadingPayments: false\n        });\n      })\n      .catch(err => {\n        console.log(err);\n        console.log(err.message);\n        // TODO: may want to show an error message here\n        // instead of not showing the loading message anymore.\n        this.setState({ loadingPayments: false });\n      });\n  };\n\n  getPayments = async () => {\n    this.getPaymentEvents();\n  };\n\n  /*\n        struct Payment {\n          // timestamps are in epoch milliseconds\n          uint holdTime;\n          uint paymentOpenTime;\n          uint paymentCloseTime;\n\n\n          uint sendAmount;\n          address payable sender;\n          address payable recipient;\n          bytes codeHash;\n\n          PaymentState state;\n      }\n     */\n\n  componentDidMount() {\n    //this.setState({ mmState: \"NOT_LOGGED_IN (please complete login)\" });\n    this.loadWeb3();\n  }\n\n  asyncSetState = instance => newState =>\n    new Promise(resolve => instance.setState(newState, resolve));\n\n  setupNetworkState = async () => {\n    let network = await this.getNetwork();\n    await this.asyncSetState(this)({ network: network });\n    return network;\n  };\n\n  // TODO: clean up this method. this.mmState is\n  // not currently used.\n  loadWeb3 = async () => {\n    var providerAvailable = false;\n    let accounts;\n\n    // Modern dapp browsers...\n    if (window.ethereum) {\n      // TODO: this is probably metamask specific and others may be window.web3.currentProvider\n      window.web3 = new Web3(window.ethereum);\n      // TODO: handle network changes in non-ethereum (legacy) provider.\n\n      // We make sure the network is detected before doing anything else.\n      let network = await this.setupNetworkState();\n\n      window.ethereum.on(\"accountsChanged\", accounts => {\n        this.setState({ accounts: accounts });\n        // Can only do this after this.state.etherclearContractInstance is defined\n        // TODO: don't need to do all of this.\n        this.registerContractInstance();\n      });\n\n      // TODO: respond to this.\n      window.ethereum.on(\"networkChanged\", netId => {\n        // Time to reload your interface with netId\n        this.setState({ network: App.networkIDToName[netId] });\n        this.registerContractInstance();\n      });\n\n      providerAvailable =\n        window.ethereum.isMetaMask || this.getCurrentProvider() === \"metamask\";\n      // Do an update now since we need to request account access.\n      //this.setState({ metamaskInstalled: providerAvailable });\n      try {\n        // Request account access if needed\n        // TODO: if the user just exits here, it doesn't throw an error.\n        accounts = await window.ethereum.enable();\n        console.log(\"Connected to account: \" + accounts[0]);\n        this.mmState = \"Connected\";\n\n        this.getCurrTimestamp();\n      } catch (error) {\n        // User denied account access...\n        console.log(error);\n        this.mmState = \"USER ACCESS DENIED: Got an error: \" + error;\n      }\n    }\n    // Legacy dapp browsers...\n    else if (window.web3) {\n      window.web3 = new Web3(window.web3.currentProvider);\n      // We make sure the network is detected before doing anything else.\n      let network = await this.setupNetworkState();\n\n      providerAvailable = this.getCurrentProvider() !== \"unknown\";\n      console.log(\n        \"Found legacy browser, provider is: \" + this.getCurrentProvider()\n      );\n      // Do an update now since we need to request account access.\n      //this.setState({ metamaskInstalled: providerAvailable });\n      // Acccounts always exposed\n      this.mmState = \"OK: Found legacy Dapp browser.\";\n      // TODO: test if you need to log in a different manner here with web3.version.getNetwork();\n      /*\n                      window.web3.eth.sendTransaction({\n\n                      });\n                      */\n\n      this.getCurrTimestamp();\n    }\n    // Non-dapp browsers...\n    else {\n      this.mmState = \"NO_SUPPORT\";\n      let msg =\n        \"Non-Ethereum browser detected. You should consider trying MetaMask!\";\n      console.log(msg);\n      this.mmState = \"NO_SUPPORT: \" + msg;\n    }\n\n    console.log(\"Metamask installed: \" + providerAvailable);\n    console.log(\"network: \" + this.state.network);\n    if (providerAvailable) {\n      // TODO: this does a setState() for allAccounts and gets the contract instance, make it more clear.\n      // TODO: We assume here that the network is not private.\n      this.fetchWeb3Accounts();\n    }\n\n    // TODO: you've probably set these at this point already anyway.\n    this.setState({\n      mmState: this.mmState,\n      metamaskInstalled: providerAvailable,\n      accounts: accounts\n    });\n  };\n\n  fetchWeb3Accounts = () => {\n    window.web3.eth.getAccounts(this.setWeb3AccountsIfMetamaskUnlocked);\n  };\n\n  setWeb3AccountsIfMetamaskUnlocked = (err, accounts) => {\n    this.addAccounts(err, accounts);\n    // TODO: This is not strictly necessary if we are using the window callback.\n    this.registerContractInstance();\n\n    return true;\n  };\n\n  addAccounts = (err, accounts) => {\n    if (err != null && err !== false) {\n      console.log(err);\n      return false;\n    } else if (accounts.length === 0) {\n      console.log(\"MetaMask is locked\");\n      return false;\n    } else {\n      console.log(\"MetaMask is unlocked: \" + accounts);\n      let allAccounts = [];\n      for (var i = 0; i < accounts.length; i++) {\n        // TODO: don't hard code Metamask as provider name.\n        allAccounts.push({ Type: \"Metamask\", Address: accounts[i] });\n      }\n      this.setState({\n        metamaskUnlocked: true,\n        allAccounts: allAccounts,\n        accounts: accounts\n      });\n    }\n  };\n\n  getContractAddress = definition => {\n    // TODO: will this cause issues? Alter once mainnet is supported\n    if (this.state.network === undefined) {\n      return undefined;\n    }\n    let networkID = App.networkNameToID[this.state.network];\n    return definition.networks[networkID].address;\n  };\n  // Assumes that this.state.network is not undefined\n  getEtherclearContractAddress = () => {\n    return this.getContractAddress(this.state.etherclearContractDefinition);\n  };\n\n  getRegistryContractAddress = () => {\n    // TODO: this is a hack since registry contract isn't defined\n    // on mainnet, take out the second condition once that's the\n    // case.\n    if (this.state.network === undefined) {\n      return undefined;\n    }\n    return this.getContractAddress(registryContractDefinition);\n  };\n\n  // This will set the contract instance in the state, and automatically retrieve the payments.\n  registerContractInstance = async etherclearDefinition => {\n    if (etherclearDefinition === undefined) {\n      etherclearDefinition = this.state.etherclearContractDefinition;\n    }\n    // https://github.com/trufflesuite/truffle-contract#full-example\n    // TODO: we don't currently support previous versions of the\n    // Registry\n    var Registry = contract(registryContractDefinition);\n    var Etherclear = contract(etherclearDefinition);\n    var etherclearAddr = this.getEtherclearContractAddress();\n    var registryAddr = this.getRegistryContractAddress();\n    console.log(\"Using Etherclear contract address: \" + etherclearAddr);\n    console.log(\"Using Registry contract address: \" + registryAddr);\n\n    // TODO: should this be window.web3.currentProvider?\n    // Should check if metamask is installed for window.ethereum\n    //console.log(window.web3.currentProvider);\n    // TODO: make a better check\n    if (window.ethereum !== undefined) {\n      Etherclear.setProvider(window.ethereum);\n      Registry.setProvider(window.ethereum);\n    } else if (window.web3.currentProvider !== undefined) {\n      Etherclear.setProvider(window.web3.currentProvider);\n      Registry.setProvider(window.web3.currentProvider);\n    } else {\n      console.log(\n        \"Could not obtain provider for Etherclear and Registry contract instances\"\n      );\n    }\n\n    // TODO: You should have a better way to handle this. This will\n    // leave the instances undefined if the network is not ropsten or main,\n    // or the addresses can't be obtained from the definition for some other\n    // reason.\n    if (registryAddr === undefined || etherclearAddr === undefined) {\n      console.log(\n        \"Can't get registry and etherclear addresses, Registry: \" +\n          registryAddr +\n          \" ,Etherclear: \" +\n          etherclearAddr\n      );\n      return;\n    }\n\n    // add snackbar for \"please complete metamask transaction\"?\n    // Could use deployed() as well.\n    // Get contract instance and last check in time.\n\n    Registry.at(registryAddr).then(async result => {\n      await this.asyncSetState(this)({\n        registryContractInstance: result\n      });\n\n      let allVersions = [];\n      let numVersions = await this.state.registryContractInstance.getNumberOfVersions();\n      let contractVersion;\n      for (let i = 0; i < numVersions; i++) {\n        let version = await this.state.registryContractInstance.getVersion(i);\n        if (version.contractAddress === etherclearAddr) {\n          contractVersion = version.versionName;\n        }\n        allVersions.push({\n          name: version.versionName,\n          address: version.contractAddress\n        });\n      }\n      if (contractVersion === undefined) {\n        console.log(\n          \"Could not find contract version for Etherclear address in registry, will fall back to current prod version\"\n        );\n      }\n      this.setState({\n        contractVersions: allVersions,\n        thisContractVersion: contractVersion\n      });\n    });\n\n    Etherclear.at(etherclearAddr)\n      .then(async result => {\n        let baseFee = await result.baseFee();\n        let paymentFee = await result.paymentFee();\n        // TODO: we should break here. This check may not work.\n        if (baseFee === undefined || paymentFee === undefined) {\n          console.log(\n            \"Could not retrieve base and payment fee from Etherclear contract\"\n          );\n          // We're not going to set the instance.\n          return;\n        }\n        await this.asyncSetState(this)({\n          etherclearContractInstance: result,\n          etherclearContractDefinition: etherclearDefinition,\n          baseFeeWei: baseFee.toString(),\n          paymentFeeWei: paymentFee.toString()\n        });\n\n        console.log(\n          \"Instance addr: \" + this.state.etherclearContractInstance.address\n        );\n\n        this.setContractAddrENSName(\n          this.state.etherclearContractInstance.address\n        );\n        this.setMainAddrENSName(this.state.accounts[0]);\n        this.getPaymentEvents();\n      })\n      .catch(err => {\n        console.log(\n          \"Error for getting initial Etherclear contract instance: \" +\n            err.toString()\n        );\n        //this.setState({ checkInErrMsg: err.message });\n      });\n  };\n\n  // TODO: fix bug in original where getNetwork() isn't a function:\n  // https://github.com/MetaMask/faq/blob/master/DEVELOPERS.md\n  // See https://github.com/ethereum/web3.js/issues/1353\n  // Also, apparently this isn't a completely accurate method:\n  // https://web3js.readthedocs.io/en/1.0/web3-eth-net.html#getnetworktype\n  async logNetworkModern() {\n    let network = await this.getNetwork();\n    this.setState({\n      network: network\n    });\n  }\n\n  async getNetwork() {\n    let err,\n      network = await window.web3.eth.net.getNetworkType();\n    if (err !== undefined) {\n      console.log(JSON.stringify(err));\n    }\n\n    return network;\n  }\n\n  // https://timestamp.online/article/how-to-convert-timestamp-to-datetime-in-javascript\n  async getCurrTimestamp() {\n    let infWeb3 = this.getInfuraWeb3();\n    let currBlock = await infWeb3.eth.getBlock(\"latest\");\n    // TODO: throw a better error if currBlock.timestamp doesn't exist, currBlock can be null!\n    if (currBlock === null || currBlock.timestamp === undefined) {\n      console.log(\"couldn't get current block timestamp\");\n      return;\n    }\n    let ts = new Date(currBlock.timestamp * 1000);\n    this.setState({\n      currTimestamp: ts.toLocaleString(),\n      currTs: currBlock.timestamp,\n      currBlock: currBlock\n    });\n    return currBlock;\n  }\n\n  // Taken from https://ethereum.stackexchange.com/questions/24266/elegant-way-to-detect-current-provider-int-web3-js\n  getCurrentProvider() {\n    if (!window.web3) return \"unknown\";\n\n    if (window.web3.currentProvider.host === \"metamask\") return \"metamask\";\n\n    if (window.web3.currentProvider.isTrust) return \"trust\";\n\n    if (window.web3.currentProvider.isGoWallet) return \"goWallet\";\n\n    if (window.web3.currentProvider.isAlphaWallet) return \"alphaWallet\";\n\n    if (window.web3.currentProvider.isStatus) return \"status\";\n\n    if (window.web3.currentProvider.isToshi) return \"coinbase\";\n\n    if (\n      typeof window.__CIPHER__ !== \"undefined\" ||\n      window.web3.currentProvider.isCipher\n    )\n      return \"cipher\";\n\n    if (window.web3.currentProvider.constructor.name === \"EthereumProvider\")\n      return \"mist\";\n\n    if (window.web3.currentProvider.constructor.name === \"Web3FrameProvider\")\n      return \"parity\";\n\n    if (\n      window.web3.currentProvider.host &&\n      window.web3.currentProvider.host.indexOf(\"infura\") !== -1\n    )\n      return \"infura\";\n\n    if (\n      window.web3.currentProvider.host &&\n      window.web3.currentProvider.host.indexOf(\"localhost\") !== -1\n    )\n      return \"localhost\";\n\n    return \"unknown\";\n  }\n}\n\nApp.propTypes = {\n  classes: PropTypes.object.isRequired\n};\n\nexport default withStyles(styles, { withTheme: theme })(withRouter(App));\n","// This optional code is used to register a service worker.\n// register() is not called by default.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on subsequent visits to a page, after all the\n// existing tabs open on the page have been closed, since previously cached\n// resources are updated in the background.\n\n// To learn more about the benefits of this model and instructions on how to\n// opt-in, read https://bit.ly/CRA-PWA\n\nconst isLocalhost = Boolean(\n  window.location.hostname === 'localhost' ||\n    // [::1] is the IPv6 localhost address.\n    window.location.hostname === '[::1]' ||\n    // 127.0.0.1/8 is considered localhost for IPv4.\n    window.location.hostname.match(\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\n    )\n);\n\nexport function register(config) {\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\n    // The URL constructor is available in all browsers that support SW.\n    const publicUrl = new URL(process.env.PUBLIC_URL, window.location.href);\n    if (publicUrl.origin !== window.location.origin) {\n      // Our service worker won't work if PUBLIC_URL is on a different origin\n      // from what our page is served on. This might happen if a CDN is used to\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\n      return;\n    }\n\n    window.addEventListener('load', () => {\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\n\n      if (isLocalhost) {\n        // This is running on localhost. Let's check if a service worker still exists or not.\n        checkValidServiceWorker(swUrl, config);\n\n        // Add some additional logging to localhost, pointing developers to the\n        // service worker/PWA documentation.\n        navigator.serviceWorker.ready.then(() => {\n          console.log(\n            'This web app is being served cache-first by a service ' +\n              'worker. To learn more, visit https://bit.ly/CRA-PWA'\n          );\n        });\n      } else {\n        // Is not localhost. Just register service worker\n        registerValidSW(swUrl, config);\n      }\n    });\n  }\n}\n\nfunction registerValidSW(swUrl, config) {\n  navigator.serviceWorker\n    .register(swUrl)\n    .then(registration => {\n      registration.onupdatefound = () => {\n        const installingWorker = registration.installing;\n        if (installingWorker == null) {\n          return;\n        }\n        installingWorker.onstatechange = () => {\n          if (installingWorker.state === 'installed') {\n            if (navigator.serviceWorker.controller) {\n              // At this point, the updated precached content has been fetched,\n              // but the previous service worker will still serve the older\n              // content until all client tabs are closed.\n              console.log(\n                'New content is available and will be used when all ' +\n                  'tabs for this page are closed. See https://bit.ly/CRA-PWA.'\n              );\n\n              // Execute callback\n              if (config && config.onUpdate) {\n                config.onUpdate(registration);\n              }\n            } else {\n              // At this point, everything has been precached.\n              // It's the perfect time to display a\n              // \"Content is cached for offline use.\" message.\n              console.log('Content is cached for offline use.');\n\n              // Execute callback\n              if (config && config.onSuccess) {\n                config.onSuccess(registration);\n              }\n            }\n          }\n        };\n      };\n    })\n    .catch(error => {\n      console.error('Error during service worker registration:', error);\n    });\n}\n\nfunction checkValidServiceWorker(swUrl, config) {\n  // Check if the service worker can be found. If it can't reload the page.\n  fetch(swUrl)\n    .then(response => {\n      // Ensure service worker exists, and that we really are getting a JS file.\n      const contentType = response.headers.get('content-type');\n      if (\n        response.status === 404 ||\n        (contentType != null && contentType.indexOf('javascript') === -1)\n      ) {\n        // No service worker found. Probably a different app. Reload the page.\n        navigator.serviceWorker.ready.then(registration => {\n          registration.unregister().then(() => {\n            window.location.reload();\n          });\n        });\n      } else {\n        // Service worker found. Proceed as normal.\n        registerValidSW(swUrl, config);\n      }\n    })\n    .catch(() => {\n      console.log(\n        'No internet connection found. App is running in offline mode.'\n      );\n    });\n}\n\nexport function unregister() {\n  if ('serviceWorker' in navigator) {\n    navigator.serviceWorker.ready.then(registration => {\n      registration.unregister();\n    });\n  }\n}\n","import Typography from \"@material-ui/core/Typography\";\nimport Grid from \"@material-ui/core/Grid\";\nimport Button from \"@material-ui/core/Button\";\nimport { Link } from \"react-router-dom\";\nimport { HashLink } from \"react-router-hash-link\";\nimport React from \"react\";\nimport CreateIcon from \"@material-ui/icons/Create\";\nimport MessageIcon from \"@material-ui/icons/Message\";\nimport CheckCircleIcon from \"@material-ui/icons/CheckCircle\";\nimport {\n  VerticalTimeline,\n  VerticalTimelineElement\n} from \"react-vertical-timeline-component\";\nimport \"react-vertical-timeline-component/style.min.css\";\n// Taken from https://github.com/stephane-monnot/react-vertical-timeline/tree/master/docs\nimport \"./static/react-vertical-timeline-main.css\";\n\nconst HomeContent = props => ({ match }) => {\n  const { classes } = props;\n  return (\n    <div>\n      <main className={classes.layout}>\n        {/* Hero unit */}\n        <div className={classes.heroContent}>\n          <Typography\n            component=\"h1\"\n            variant=\"h2\"\n            align=\"center\"\n            color=\"textPrimary\"\n            gutterBottom\n          >\n            Safer P2P payments for Ethereum\n          </Typography>\n          <Typography\n            variant=\"h6\"\n            align=\"center\"\n            color=\"textSecondary\"\n            component=\"p\"\n          >\n            Etherclear protects the sender of an ETH or ERC-20 token payment\n            from sending funds to the wrong address.\n            <br />\n          </Typography>\n          <div className={classes.heroButtons}>\n            <Grid container spacing={4} justify=\"center\">\n              <Grid item>\n                <HashLink\n                  to={\"/#why-use-eth-refund\"}\n                  style={{ textDecoration: \"none\", color: \"inherit\" }}\n                >\n                  <Button variant=\"contained\" color=\"primary\">\n                    Learn more\n                  </Button>\n                </HashLink>\n              </Grid>\n              <Grid item>\n                <Link\n                  to={\"/app\"}\n                  style={{ textDecoration: \"none\", color: \"inherit\" }}\n                >\n                  <Button variant=\"outlined\" color=\"primary\">\n                    Try the app\n                  </Button>\n                </Link>\n              </Grid>\n            </Grid>\n          </div>\n        </div>\n        {/* End hero unit */}\n        <Typography\n          variant=\"h6\"\n          align=\"left\"\n          color=\"textSecondary\"\n          component=\"p\"\n        >\n          Please be aware that the app and site are still in beta. Currently,\n          Etherclear is only available on the Ropsten testnet.\n          <br />\n          <br />\n          Etherclear currently supports the Metamask and Toshi (Coinbase)\n          wallets.\n        </Typography>\n        {/* Begin hero unit */}\n        <div className={classes.heroContent}>\n          <Typography\n            component=\"h1\"\n            variant=\"h2\"\n            align=\"center\"\n            color=\"textPrimary\"\n          >\n            <div id={\"why-use-eth-refund\"} />\n            Why use Etherclear?\n          </Typography>\n        </div>\n        <div>\n          <Typography\n            variant=\"h6\"\n            align=\"justify\"\n            color=\"textSecondary\"\n            component=\"p\"\n          >\n            Cryptocurrencies have revolutionized our ability to send large\n            amounts of money to the wrong place. Many people lose ETH and tokens\n            every day due to{\" \"}\n            <a\n              href=\"https://media.consensys.net/over-12-000-ether-are-lost-forever-due-to-typos-f6ccc35432f8\"\n              target={\"_blank\"}\n            >\n              typos\n            </a>{\" \"}\n            or pasting the wrong address entirely. It shouldn't be stressful to\n            send large amounts of cryptocurrency, especially for first time\n            users.\n            <br />\n            <br />\n            Etherclear helps you safely move large amounts of ETH and ERC-20\n            tokens between your own wallets, or to people you may have a secure\n            communication channel open with (family, friends, landlords,\n            coworkers, etc.).\n            <br />\n            <br />\n            It gives you a way to expose funds on Ethereum to a recipient, while\n            still retaining the option to cancel the payment and take the funds\n            back.\n          </Typography>\n        </div>\n        {/* End hero unit */}\n        {/* Begin hero unit */}\n        <div className={classes.heroContent}>\n          <Typography\n            component=\"h1\"\n            variant=\"h2\"\n            align=\"center\"\n            color=\"textPrimary\"\n            gutterBottom\n          >\n            How it works\n          </Typography>\n          <Typography\n            variant=\"h6\"\n            align=\"justify\"\n            color=\"textSecondary\"\n            component=\"p\"\n          >\n            {\" \"}\n            Etherclear uses a smart contract, which can be found{\" \"}\n            <a\n              href={\"https://github.com/etherclearapp/etherclear_contracts\"}\n              target={\"_blank\"}\n            >\n              here\n            </a>\n            . In order for the recipient to retrieve any funds, the smart\n            contract requires them to enter a passphrase provided by the sender,\n            within a time window that is specified by the sender.\n            <br />\n            <br />\n            At any point before the recipient retrieves the funds, the sender\n            can cancel the payment and get their assets back.\n            <br />\n            <br />\n            Note that the current Etherclear implementation doesn't work for\n            sending funds to or from centralized exchanges, because exchanges\n            will not interact with this contract to withdraw funds or submit a\n            payment. If you send to an exchange address accidentally, you can\n            always recover the funds for the cost of gas by cancelling the\n            payment (that's the point of the dapp).\n            <br />\n            <br />\n            We hope that this won't be as much of a problem with decentralized\n            exchanges, since with these the user usually interacts with a\n            trusted contract address.\n          </Typography>\n        </div>\n        {/* End hero unit */}\n      </main>\n\n      <div style={{ background: \"#3c9eb5\" }}>\n        <VerticalTimeline>\n          <VerticalTimelineElement\n            className=\"vertical-timeline-element--work\"\n            iconStyle={{ background: \"rgb(33, 150, 243)\", color: \"#fff\" }}\n            icon={<CreateIcon />}\n            position={\"left\"}\n          >\n            <h3 className=\"vertical-timeline-element-title\">\n              Sender creates payment.\n            </h3>\n\n            <p>A unique passphrase is generated for each payment.</p>\n            <br />\n            <p>\n              {\" \"}\n              Etherclear currently charges a 0.001 ETH fee for creating a\n              payment.\n            </p>\n          </VerticalTimelineElement>\n          <VerticalTimelineElement\n            className=\"vertical-timeline-element--work\"\n            iconStyle={{ background: \"rgb(33, 150, 243)\", color: \"#fff\" }}\n            icon={<MessageIcon />}\n            position={\"left\"}\n          >\n            <h3 className=\"vertical-timeline-element-title\">\n              Sender communicates passphrase to recipient.\n            </h3>\n\n            <p>\n              Ideally, this should be done through an encrypted chat or email\n              service such as{\" \"}\n              <a href=\"https://www.whatsapp.com/\" target={\"_blank\"}>\n                WhatsApp\n              </a>\n              ,{\" \"}\n              <a href=\"https://protonmail.com/\" target={\"_blank\"}>\n                ProtonMail\n              </a>\n              ,{\" \"}\n              <a href=\"https://signal.org/\" target={\"_blank\"}>\n                Signal\n              </a>\n              , or{\" \"}\n              <a href=\"https://keybase.io/\" target={\"_blank\"}>\n                Keybase\n              </a>\n              .\n              <br />\n              <br />\n              If you are using a service like Facebook Messenger or Telegram,\n              make sure you have end-to-end encryption turned on.\n            </p>\n          </VerticalTimelineElement>\n          <VerticalTimelineElement\n            className=\"vertical-timeline-element--work\"\n            iconStyle={{ background: \"rgb(0, 204, 0)\", color: \"#fff\" }}\n            icon={<CheckCircleIcon />}\n            position={\"right\"}\n          >\n            <h3 className=\"vertical-timeline-element-title\">\n              Recipient enters passphrase and completes payment.\n            </h3>\n            <p>\n              To retrieve funds with Etherclear, the recipient uses feeless\n              retrieval for free, or makes a contract call and pays a gas fee.\n              <br />\n              <br />\n              This action can only be done in a time window specified by the\n              sender.\n            </p>\n          </VerticalTimelineElement>\n        </VerticalTimeline>\n      </div>\n    </div>\n  );\n};\n\nexport default HomeContent;\n","import React from \"react\";\nimport Typography from \"@material-ui/core/Typography\";\n\nconst FAQContent = props => ({ match }) => {\n  const { classes } = props;\n  return (\n    <div>\n      <Typography\n        variant=\"h6\"\n        align=\"center\"\n        color=\"textSecondary\"\n        component=\"p\"\n        style={{ paddingTop: \"50px\" }}\n      >\n        There's nothing here right now,{\" \"}\n        <a\n          href={\"https://github.com/etherclearapp/etherclear_frontend/issues\"}\n          style={{ color: \"inherit\" }}\n        >\n          {\" \"}\n          ask some questions!\n        </a>\n      </Typography>\n    </div>\n  );\n};\n\nexport default FAQContent;\n","import React from \"react\";\nimport classNames from \"classnames\";\nimport PropTypes from \"prop-types\";\nimport AppBar from \"@material-ui/core/AppBar\";\nimport Button from \"@material-ui/core/Button\";\nimport CssBaseline from \"@material-ui/core/CssBaseline\";\nimport Grid from \"@material-ui/core/Grid\";\nimport Toolbar from \"@material-ui/core/Toolbar\";\nimport Typography from \"@material-ui/core/Typography\";\nimport { withStyles } from \"@material-ui/core/styles\";\nimport { Link } from \"react-router-dom\";\nimport HomeContent from \"./HomeContent\";\nimport FAQContent from \"./FAQContent\";\nimport { Route } from \"react-router-dom\";\nimport { Switch } from \"react-router\";\nimport MenuIcon from \"@material-ui/icons/Menu\";\nimport MenuItem from \"@material-ui/core/MenuItem\";\nimport Menu from \"@material-ui/core/Menu\";\nimport { createMuiTheme } from \"@material-ui/core/styles\";\nimport createPalette from \"@material-ui/core/styles/createPalette\";\n\n// TODO: switch back to this once it's stable.\nimport { unstable_useMediaQuery as useMediaQuery } from \"@material-ui/core/useMediaQuery\";\nimport MediaQuery from \"react-responsive\";\nimport MuiThemeProvider from \"@material-ui/core/styles/MuiThemeProvider\";\nimport purple from \"@material-ui/core/colors/purple\";\n\nconst theme = createMuiTheme({\n  palette: createPalette({\n    primary: {\n      light: \"#757ce8\",\n      main: \"#3c9eb5\",\n      dark: \"#506184\",\n      contrastText: \"#fff\"\n    },\n    secondary: {\n      light: \"#ff7961\",\n      main: \"#f44336\",\n      dark: \"#ba000d\",\n      contrastText: \"#000\"\n    }\n  }),\n  typography: {\n    useNextVariants: true\n  }\n});\n\nconst styles = theme => ({\n  \"@global\": {\n    body: {\n      backgroundColor: theme.palette.common.white\n    }\n  },\n  appBar: {\n    position: \"relative\",\n    width: \"100%\",\n    backgroundColor: \"#3c9eb5\"\n  },\n  toolbarTitle: {\n    flex: 1\n  },\n  layout: {\n    width: \"auto\",\n    marginLeft: theme.spacing(3),\n    marginRight: theme.spacing(3),\n    [theme.breakpoints.up(900 + theme.spacing(3 * 2))]: {\n      width: 900,\n      marginLeft: \"auto\",\n      marginRight: \"auto\"\n    }\n  },\n  heroContent: {\n    maxWidth: 800,\n    margin: \"0 auto\",\n    padding: `${theme.spacing(8)}px 0 ${theme.spacing(6)}px`\n  },\n  heroButtons: {\n    marginTop: theme.spacing(4)\n  },\n  footer: {\n    marginTop: theme.spacing(8),\n    borderTop: `1px solid ${theme.palette.divider}`,\n    padding: `${theme.spacing(6)}px 0`\n  },\n  icon: {\n    marginRight: theme.spacing(2)\n  }\n});\n\nconst footers = [\n  {\n    title: \"Company\",\n    description: [\"About\"]\n  },\n  {\n    title: \"Contact\",\n    description: [\n      <a\n        href={\"https://github.com/etherclearapp/etherclear_frontend/issues\"}\n        style={{ color: \"inherit\" }}\n        target={\"_blank\"}\n      >\n        Github Issues\n      </a>\n    ]\n  },\n  {\n    title: \"Resources\",\n    description: [\n      <a\n        href={\n          \"https://docs.google.com/document/d/1UEobbwmL78Yhy6vjY4yGEdYThFIiHOieujM5TfM1dp4/edit?usp=sharing\"\n        }\n        style={{ color: \"inherit\" }}\n        target={\"_blank\"}\n      >\n        Guide\n      </a>,\n      <Link to={\"/faq\"} style={{ color: \"inherit\" }}>\n        FAQ\n      </Link>,\n      <a href=\"https://github.com/etherclearapp\" style={{ color: \"inherit\" }}>\n        Github repo\n      </a>\n    ]\n  },\n  {\n    title: \"Legal\",\n    description: [\"Disclaimer\", \"Terms of use\"]\n  }\n];\n\n// The Homepage is the main page for the site, and uses a different\n// (and simpler) menu.\nclass Homepage extends React.Component {\n  state = {\n    anchorEl: null\n  };\n\n  handleMenuIconClick = event => {\n    this.setState({ anchorEl: event.currentTarget });\n  };\n\n  handleMenuIconClose = event => {\n    this.setState({ anchorEl: null });\n  };\n\n  render() {\n    const { classes } = this.props;\n    // This means the user is on a mobile device.\n    const { anchorEl } = this.state;\n    //const displayMenuIcon = useMediaQuery(\"(max-device-width: 1224px)\");\n\n    const renderMenuIconMenu = () => {\n      return (\n        <React.Fragment>\n          <Button onClick={this.handleMenuIconClick}>\n            <MenuIcon\n              aria-owns={anchorEl ? \"simple-menu\" : undefined}\n              aria-haspopup=\"true\"\n            />\n          </Button>\n          <Menu\n            id=\"simple-menu\"\n            anchorEl={anchorEl}\n            open={Boolean(anchorEl)}\n            onClose={this.handleMenuIconClose}\n          >\n            <MenuItem onClick={this.handleMenuIconClose}>\n              <Link\n                to={\"/\"}\n                style={{\n                  textDecoration: \"none\",\n                  color: \"inherit\"\n                }}\n              >\n                Home\n              </Link>\n            </MenuItem>\n            <MenuItem onClick={this.handleMenuIconClose}>\n              <a\n                href={\n                  \"https://docs.google.com/document/d/1UEobbwmL78Yhy6vjY4yGEdYThFIiHOieujM5TfM1dp4/edit?usp=sharing\"\n                }\n                style={{ textDecoration: \"none\", color: \"inherit\" }}\n                target={\"_blank\"}\n              >\n                Guide\n              </a>\n            </MenuItem>\n            <MenuItem>\n              <Link\n                to={\"/faq\"}\n                style={{ textDecoration: \"none\", color: \"inherit\" }}\n              >\n                FAQ\n              </Link>\n            </MenuItem>\n            <MenuItem>\n              <Link\n                to={\"/app\"}\n                style={{ color: \"#506184\", textDecoration: \"none\" }}\n              >\n                App\n              </Link>\n            </MenuItem>\n          </Menu>\n        </React.Fragment>\n      );\n    };\n\n    const buttonTheme = createMuiTheme({\n      palette: createPalette({\n        primary: {\n          light: \"#757ce8\",\n          main: \"#b3fffd\",\n          dark: \"#506184\",\n          contrastText: \"#fff\"\n        }\n      })\n    });\n\n    const renderRegularMenu = () => {\n      return (\n        <React.Fragment>\n          <Link to={\"/\"} style={{ textDecoration: \"none\", color: \"#fff\" }}>\n            <Button>\n              <div style={{ color: \"#fff\" }}>Home</div>\n            </Button>\n          </Link>\n          <a\n            href={\n              \"https://docs.google.com/document/d/1UEobbwmL78Yhy6vjY4yGEdYThFIiHOieujM5TfM1dp4/edit?usp=sharing\"\n            }\n            style={{ textDecoration: \"none\", color: \"inherit\" }}\n            target={\"_blank\"}\n          >\n            <Button>\n              <div style={{ color: \"#fff\" }}>Guide</div>\n            </Button>\n          </a>\n          <Link to={\"/faq\"} style={{ textDecoration: \"none\" }}>\n            <Button>\n              <div style={{ color: \"#fff\" }}>FAQ</div>\n            </Button>\n          </Link>\n          <MuiThemeProvider theme={buttonTheme}>\n            <Link to={\"/app\"} style={{ textDecoration: \"none\" }}>\n              <Button color=\"primary\" variant=\"outlined\">\n                App\n              </Button>\n            </Link>\n          </MuiThemeProvider>\n        </React.Fragment>\n      );\n    };\n\n    // See media query examples at https://github.com/contra/react-responsive\n    return (\n      <MuiThemeProvider theme={theme}>\n        <React.Fragment>\n          <CssBaseline />\n          <AppBar position=\"static\" color=\"default\" className={classes.appBar}>\n            <Toolbar>\n              <Link\n                className={classes.toolbarTitle}\n                to={\"/\"}\n                style={{ textDecoration: \"none\", color: \"inherit\" }}\n              >\n                <img src={require(\"./text-logo.png\")} alt=\"Home\" />\n              </Link>\n\n              <MediaQuery query=\"(max-width: 1224px), (max-device-width: 1224px)\">\n                {renderMenuIconMenu()}\n              </MediaQuery>\n              <MediaQuery query=\"(min-device-width: 1224px) and (min-width: 1224px)\">\n                {renderRegularMenu()}\n              </MediaQuery>\n            </Toolbar>\n          </AppBar>\n          <Switch>\n            <Route exact path=\"/\" component={HomeContent(this.props)} />\n            <Route path=\"/faq\" component={FAQContent(this.props)} />\n          </Switch>\n          {/* Footer */}\n          <footer className={classNames(classes.footer, classes.layout)}>\n            <Grid container spacing={4} justify=\"space-evenly\">\n              {footers.map((footer, ind) => (\n                <Grid item xs key={ind}>\n                  <Typography variant=\"h6\" color=\"textPrimary\" gutterBottom>\n                    {footer.title}\n                  </Typography>\n                  {footer.description.map((item, ind) => (\n                    <Typography\n                      key={ind}\n                      variant=\"subtitle1\"\n                      color=\"textSecondary\"\n                    >\n                      {item}\n                    </Typography>\n                  ))}\n                </Grid>\n              ))}\n            </Grid>\n          </footer>\n          {/* End footer */}\n          <Typography align={\"center\"}>\n            Email: etherclearapp (at) protonmail.com\n          </Typography>\n          <Typography\n            variant=\"h6\"\n            color=\"inherit\"\n            align={\"center\"}\n            noWrap\n            style={{ paddingTop: \"50px\" }}\n            className={classes.toolbarTitle}\n          >\n            Copyright © 2019 Etherclear.{\" \"}\n            <MediaQuery query={\"(max-width: 1224px)\"}>\n              <br />\n            </MediaQuery>\n            All rights reserved.\n          </Typography>\n        </React.Fragment>\n      </MuiThemeProvider>\n    );\n  }\n}\n\nHomepage.propTypes = {\n  classes: PropTypes.object.isRequired\n};\n\nexport default withStyles(styles)(Homepage);\n","import React from \"react\";\nimport { BrowserRouter as Router, Route } from \"react-router-dom\";\nimport App from \"./App\";\nimport Homepage from \"./Homepage\";\n\nclass Routing extends React.Component {\n  render() {\n    return (\n      <Router>\n        <div>\n          <Route exact path=\"/\" component={Home} />\n          {/* TODO: should this be a multi part route? */}\n          <Route exact path={\"/faq\"} component={Home} />\n          <Route path=\"/app\" component={MainApp} />\n        </div>\n      </Router>\n    );\n  }\n}\n\nfunction MainApp() {\n  return <App />;\n}\n\nfunction Home() {\n  return <Homepage />;\n}\n\nexport default Routing;\n","import React from \"react\";\nimport ReactDOM from \"react-dom\";\nimport \"./index.css\";\nimport App from \"./App\";\nimport * as serviceWorker from \"./serviceWorker\";\nimport Routing from \"./Routing\";\nimport ReactGA from \"react-ga\";\n\n// TODO: move off of Google Analytics.\nasync function initializeReactGA() {\n  ReactGA.initialize(\"UA-99140189-3\");\n  ReactGA.pageview(\"/homepage\");\n}\n\ninitializeReactGA();\n\nReactDOM.render(<Routing />, document.getElementById(\"root\"));\n\n// If you want your app to work offline and load faster, you can change\n// unregister() to register() below. Note this comes with some pitfalls.\n// Learn more about service workers: https://bit.ly/CRA-PWA\nserviceWorker.unregister();\n"],"sourceRoot":""}